<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<meta name="author" content="Port of 2016 LaTeX document&#8201;&#8212;&#8201;2022-01-03">
<title>FlashForth 5 Quick Reference for PIC and AVR Microcontrollers</title>
<style>
/*! normalize.css v2.1.2 | MIT License | git.io/normalize */
/* ========================================================================== HTML5 display definitions ========================================================================== */
/** Correct `block` display not defined in IE 8/9. */
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary { display: block; }

/** Correct `inline-block` display not defined in IE 8/9. */
audio, canvas, video { display: inline-block; }

/** Prevent modern browsers from displaying `audio` without controls. Remove excess height in iOS 5 devices. */
audio:not([controls]) { display: none; height: 0; }

/** Address `[hidden]` styling not present in IE 8/9. Hide the `template` element in IE, Safari, and Firefox < 22. */
[hidden], template { display: none; }

script { display: none !important; }

/* ========================================================================== Base ========================================================================== */
/** 1. Set default font family to sans-serif. 2. Prevent iOS text size adjust after orientation change, without disabling user zoom. */
html { font-family: sans-serif; /* 1 */ -ms-text-size-adjust: 100%; /* 2 */ -webkit-text-size-adjust: 100%; /* 2 */ }

/** Remove default margin. */
body { margin: 0; }

/* ========================================================================== Links ========================================================================== */
/** Remove the gray background color from active links in IE 10. */
a { background: transparent; }

/** Address `outline` inconsistency between Chrome and other browsers. */
a:focus { outline: thin dotted; }

/** Improve readability when focused and also mouse hovered in all browsers. */
a:active, a:hover { outline: 0; }

/* ========================================================================== Typography ========================================================================== */
/** Address variable `h1` font-size and margin within `section` and `article` contexts in Firefox 4+, Safari 5, and Chrome. */
h1 { font-size: 2em; margin: 0.67em 0; }

/** Address styling not present in IE 8/9, Safari 5, and Chrome. */
abbr[title] { border-bottom: 1px dotted; }

/** Address style set to `bolder` in Firefox 4+, Safari 5, and Chrome. */
b, strong { font-weight: bold; }

/** Address styling not present in Safari 5 and Chrome. */
dfn { font-style: italic; }

/** Address differences between Firefox and other browsers. */
hr { -moz-box-sizing: content-box; box-sizing: content-box; height: 0; }

/** Address styling not present in IE 8/9. */
mark { background: #ff0; color: #000; }

/** Correct font family set oddly in Safari 5 and Chrome. */
code, kbd, pre, samp { font-family: monospace, serif; font-size: 1em; }

/** Improve readability of pre-formatted text in all browsers. */
pre { white-space: pre-wrap; }

/** Set consistent quote types. */
q { quotes: "\201C" "\201D" "\2018" "\2019"; }

/** Address inconsistent and variable font size in all browsers. */
small { font-size: 80%; }

/** Prevent `sub` and `sup` affecting `line-height` in all browsers. */
sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }

sup { top: -0.5em; }

sub { bottom: -0.25em; }

/* ========================================================================== Embedded content ========================================================================== */
/** Remove border when inside `a` element in IE 8/9. */
img { border: 0; }

/** Correct overflow displayed oddly in IE 9. */
svg:not(:root) { overflow: hidden; }

/* ========================================================================== Figures ========================================================================== */
/** Address margin not present in IE 8/9 and Safari 5. */
figure { margin: 0; }

/* ========================================================================== Forms ========================================================================== */
/** Define consistent border, margin, and padding. */
fieldset { border: 1px solid #c0c0c0; margin: 0 2px; padding: 0.35em 0.625em 0.75em; }

/** 1. Correct `color` not being inherited in IE 8/9. 2. Remove padding so people aren't caught out if they zero out fieldsets. */
legend { border: 0; /* 1 */ padding: 0; /* 2 */ }

/** 1. Correct font family not being inherited in all browsers. 2. Correct font size not being inherited in all browsers. 3. Address margins set differently in Firefox 4+, Safari 5, and Chrome. */
button, input, select, textarea { font-family: inherit; /* 1 */ font-size: 100%; /* 2 */ margin: 0; /* 3 */ }

/** Address Firefox 4+ setting `line-height` on `input` using `!important` in the UA stylesheet. */
button, input { line-height: normal; }

/** Address inconsistent `text-transform` inheritance for `button` and `select`. All other form control elements do not inherit `text-transform` values. Correct `button` style inheritance in Chrome, Safari 5+, and IE 8+. Correct `select` style inheritance in Firefox 4+ and Opera. */
button, select { text-transform: none; }

/** 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio` and `video` controls. 2. Correct inability to style clickable `input` types in iOS. 3. Improve usability and consistency of cursor style between image-type `input` and others. */
button, html input[type="button"], input[type="reset"], input[type="submit"] { -webkit-appearance: button; /* 2 */ cursor: pointer; /* 3 */ }

/** Re-set default cursor for disabled elements. */
button[disabled], html input[disabled] { cursor: default; }

/** 1. Address box sizing set to `content-box` in IE 8/9. 2. Remove excess padding in IE 8/9. */
input[type="checkbox"], input[type="radio"] { box-sizing: border-box; /* 1 */ padding: 0; /* 2 */ }

/** 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome. 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome (include `-moz` to future-proof). */
input[type="search"] { -webkit-appearance: textfield; /* 1 */ -moz-box-sizing: content-box; -webkit-box-sizing: content-box; /* 2 */ box-sizing: content-box; }

/** Remove inner padding and search cancel button in Safari 5 and Chrome on OS X. */
input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration { -webkit-appearance: none; }

/** Remove inner padding and border in Firefox 4+. */
button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; }

/** 1. Remove default vertical scrollbar in IE 8/9. 2. Improve readability and alignment in all browsers. */
textarea { overflow: auto; /* 1 */ vertical-align: top; /* 2 */ }

/* ========================================================================== Tables ========================================================================== */
/** Remove most spacing between table cells. */
table { border-collapse: collapse; border-spacing: 0; }

meta.foundation-mq-small { font-family: "only screen and (min-width: 768px)"; width: 768px; }

meta.foundation-mq-medium { font-family: "only screen and (min-width:1280px)"; width: 1280px; }

meta.foundation-mq-large { font-family: "only screen and (min-width:1440px)"; width: 1440px; }

*, *:before, *:after { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }

html, body { font-size: 100%; }

body { background: white; color: #222222; padding: 0; margin: 0; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; line-height: 1; position: relative; cursor: auto; }

a:hover { cursor: pointer; }

img, object, embed { max-width: 100%; height: auto; }

object, embed { height: 100%; }

img { -ms-interpolation-mode: bicubic; }

#map_canvas img, #map_canvas embed, #map_canvas object, .map_canvas img, .map_canvas embed, .map_canvas object { max-width: none !important; }

.left { float: left !important; }

.right { float: right !important; }

.text-left { text-align: left !important; }

.text-right { text-align: right !important; }

.text-center { text-align: center !important; }

.text-justify { text-align: justify !important; }

.hide { display: none; }

.antialiased { -webkit-font-smoothing: antialiased; }

img { display: inline-block; vertical-align: middle; }

textarea { height: auto; min-height: 50px; }

select { width: 100%; }

object, svg { display: inline-block; vertical-align: middle; }

.center { margin-left: auto; margin-right: auto; }

.stretch { width: 100%; }

p.lead { font-size: 1.21875em; line-height: 1.6; }

.subheader, .admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { line-height: 1.4; color: #6c818f; font-weight: 300; margin-top: 0.2em; margin-bottom: 0.5em; }

/* Typography resets */
div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td { margin: 0; padding: 0; direction: ltr; }

/* Default Link Styles */
a { color: #465158; text-decoration: underline; line-height: inherit; }
a:hover, a:focus { color: #ff0000; }
a img { border: none; }

/* Default paragraph styles */
p { font-family: inherit; font-weight: normal; font-size: 1em; line-height: 1.5; margin-bottom: 1.25em; text-rendering: optimizeLegibility; }
p aside { font-size: 0.875em; line-height: 1.35; font-style: italic; }

/* Default header styles */
h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { font-family: ff-meta-web-pro-1, ff-meta-web-pro-2, Arial, "Helvetica Neue", sans-serif; font-weight: bold; font-style: normal; color: #465158; text-rendering: optimizeLegibility; margin-top: 1em; margin-bottom: 0.5em; line-height: 1.2125em; }
h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small { font-size: 60%; color: #909ea7; line-height: 0; }

h1 { font-size: 2.125em; }

h2 { font-size: 1.6875em; }

h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.375em; }

h4 { font-size: 1.125em; }

h5 { font-size: 1.125em; }

h6 { font-size: 1em; }

hr { border: solid #dddddd; border-width: 1px 0 0; clear: both; margin: 1.25em 0 1.1875em; height: 0; }

/* Helpful Typography Defaults */
em, i { font-style: italic; line-height: inherit; }

strong, b { font-weight: bold; line-height: inherit; }

small { font-size: 60%; line-height: inherit; }

code { font-family: "Consolas", "Deja Vu Sans Mono", "Bitstream Vera Sans Mono", monospace; font-weight: normal; color: #444444; }

/* Lists */
ul, ol, dl { font-size: 1em; line-height: 1.5; margin-bottom: 1.25em; list-style-position: outside; font-family: inherit; }

ul, ol { margin-left: 0; }
ul.no-bullet, ol.no-bullet { margin-left: 0; }

/* Unordered Lists */
ul li ul, ul li ol { margin-left: 1.25em; margin-bottom: 0; font-size: 1em; /* Override nested font-size change */ }
ul.square li ul, ul.circle li ul, ul.disc li ul { list-style: inherit; }
ul.square { list-style-type: square; }
ul.circle { list-style-type: circle; }
ul.disc { list-style-type: disc; }
ul.no-bullet { list-style: none; }

/* Ordered Lists */
ol li ul, ol li ol { margin-left: 1.25em; margin-bottom: 0; }

/* Definition Lists */
dl dt { margin-bottom: 0.3em; font-weight: bold; }
dl dd { margin-bottom: 0.75em; }

/* Abbreviations */
abbr, acronym { text-transform: uppercase; font-size: 90%; color: black; border-bottom: 1px dotted #dddddd; cursor: help; }

abbr { text-transform: none; }

/* Blockquotes */
blockquote { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
blockquote cite { display: block; font-size: 0.8125em; color: #748590; }
blockquote cite:before { content: "\2014 \0020"; }
blockquote cite a, blockquote cite a:visited { color: #748590; }

blockquote, blockquote p { line-height: 1.5; color: #909ea7; }

/* Microformats */
.vcard { display: inline-block; margin: 0 0 1.25em 0; border: 1px solid #dddddd; padding: 0.625em 0.75em; }
.vcard li { margin: 0; display: block; }
.vcard .fn { font-weight: bold; font-size: 0.9375em; }

.vevent .summary { font-weight: bold; }
.vevent abbr { cursor: auto; text-decoration: none; font-weight: bold; border: none; padding: 0 0.0625em; }

@media only screen and (min-width: 768px) { h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; }
  h1 { font-size: 2.75em; }
  h2 { font-size: 2.3125em; }
  h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.6875em; }
  h4 { font-size: 1.4375em; } }
/* Tables */
table { background: white; margin-bottom: 1.25em; border: solid 0 #dddddd; }
table thead, table tfoot { background: none; font-weight: bold; }
table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td { padding: 1px 8px 1px 5px; font-size: 1em; color: #222222; text-align: left; }
table tr th, table tr td { padding: 1px 8px 1px 5px; font-size: 1em; color: #222222; }
table tr.even, table tr.alt, table tr:nth-of-type(even) { background: none; }
table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td { display: table-cell; line-height: 1.5; }

body { -moz-osx-font-smoothing: grayscale; -webkit-font-smoothing: antialiased; tab-size: 4; }

h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; }

.clearfix:before, .clearfix:after, .float-group:before, .float-group:after { content: " "; display: table; }
.clearfix:after, .float-group:after { clear: both; }

:not(pre):not([class^=L]) > code { font-size: 0.95em; font-style: normal !important; letter-spacing: 0; padding: 0; background-color: #f2f2f2; -webkit-border-radius: 6px; border-radius: 6px; line-height: inherit; word-wrap: break-word; }

:not(pre) > code.nobreak { word-wrap: normal; }
:not(pre) > code.nowrap { white-space: nowrap; }

pre { color: inherit; font-family: "Consolas", "Deja Vu Sans Mono", "Bitstream Vera Sans Mono", monospace; line-height: 1.2; }
pre code, pre pre { color: inherit; font-size: inherit; line-height: inherit; }
pre > code { display: block; }

pre.nowrap, pre.nowrap pre { white-space: pre; word-wrap: normal; }

em em { font-style: normal; }

strong strong { font-weight: normal; }

.keyseq { color: #333333; }

kbd { font-family: "Consolas", "Deja Vu Sans Mono", "Bitstream Vera Sans Mono", monospace; display: inline-block; color: black; font-size: 0.65em; line-height: 1.45; background-color: #f7f7f7; border: 1px solid #ccc; -webkit-border-radius: 3px; border-radius: 3px; -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset; box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset; margin: 0 0.15em; padding: 0.2em 0.5em; vertical-align: middle; position: relative; top: -0.1em; white-space: nowrap; }

.keyseq kbd:first-child { margin-left: 0; }

.keyseq kbd:last-child { margin-right: 0; }

.menuseq, .menuref { color: #000; }

.menuseq b:not(.caret), .menuref { font-weight: inherit; }

.menuseq { word-spacing: -0.02em; }
.menuseq b.caret { font-size: 1.25em; line-height: 0.8; }
.menuseq i.caret { font-weight: bold; text-align: center; width: 0.45em; }

b.button:before, b.button:after { position: relative; top: -1px; font-weight: normal; }

b.button:before { content: "["; padding: 0 3px 0 2px; }

b.button:after { content: "]"; padding: 0 2px 0 3px; }

p a > code:hover { color: #373737; }

#header, #content, #footnotes, #footer { width: 100%; margin-left: auto; margin-right: auto; margin-top: 0; margin-bottom: 0; max-width: 62.5em; *zoom: 1; position: relative; padding-left: 0.9375em; padding-right: 0.9375em; }
#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after { content: " "; display: table; }
#header:after, #content:after, #footnotes:after, #footer:after { clear: both; }

#content { margin-top: 1.25em; }

#content:before { content: none; }

#header > h1:first-child { color: #111111; margin-top: 2.25rem; margin-bottom: 0; }
#header > h1:first-child + #toc { margin-top: 8px; border-top: 1px solid #dddddd; }
#header > h1:only-child, body.toc2 #header > h1:nth-last-child(2) { border-bottom: 1px solid #dddddd; padding-bottom: 8px; }
#header .details { border-bottom: 1px solid #dddddd; line-height: 1.45; padding-top: 0.25em; padding-bottom: 0.25em; padding-left: 0.25em; color: #748590; display: -ms-flexbox; display: -webkit-flex; display: flex; -ms-flex-flow: row wrap; -webkit-flex-flow: row wrap; flex-flow: row wrap; }
#header .details span:first-child { margin-left: -0.125em; }
#header .details span.email a { color: #909ea7; }
#header .details br { display: none; }
#header .details br + span:before { content: "\00a0\2013\00a0"; }
#header .details br + span.author:before { content: "\00a0\22c5\00a0"; color: #909ea7; }
#header .details br + span#revremark:before { content: "\00a0|\00a0"; }
#header #revnumber { text-transform: capitalize; }
#header #revnumber:after { content: "\00a0"; }

#content > h1:first-child:not([class]) { color: #ffffff; border-bottom: 1px solid #dddddd; padding-bottom: 8px; margin-top: 0; padding-top: 1rem; margin-bottom: 1.25rem; }

#toc { border-bottom: 1px solid #dddddd; padding-bottom: 0.5em; }
#toc > ul { margin-left: 0.125em; }
#toc ul.sectlevel0 > li > a { font-style: italic; color: #ffffff; }
#toc ul.sectlevel0 ul.sectlevel1 { margin: 0.5em 0; }
#toc ul { font-family: ff-meta-web-pro-1, ff-meta-web-pro-2, Arial, "Helvetica Neue", sans-serif; list-style-type: none; color: #ffffff; }
#toc li { line-height: 1.3334; margin-top: 0.3334em; }
#toc a { color: #ffffff; text-decoration: none; }
#toc a:active { text-decoration: underline; }

#toctitle { color: #ffffff; font-size: 1.2em; }
#toc-dot-leader { color: #ffffff; }

@media only screen and (min-width: 768px) { #toctitle { font-size: 1.375em; }
  body.toc2 { padding-left: 15em; padding-right: 0; }
  #toc.toc2 { margin-top: 0 !important; background: #000000; position: fixed; width: 15em; left: 0; top: 0; border-right: 1px solid #dddddd; border-top-width: 0 !important; border-bottom-width: 0 !important; z-index: 1000; padding: 1.25em 1em; height: 100%; overflow: auto; }
  #toc.toc2 #toctitle { margin-top: 0; margin-bottom: 0.8rem; font-size: 1.2em; }
  #toc.toc2 > ul { font-size: 0.9em; margin-bottom: 0; }
  #toc.toc2 ul ul { margin-left: 0; padding-left: 1em; }
  #toc.toc2 ul.sectlevel0 ul.sectlevel1 { padding-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 15em; }
  body.toc2.toc-right #toc.toc2 { border-right-width: 0; border-left: 1px solid #dddddd; left: auto; right: 0; } }
@media only screen and (min-width: 1280px) { body.toc2 { padding-left: 20em; padding-right: 0; }
  #toc.toc2 { width: 20em; }
  #toc.toc2 #toctitle { font-size: 1.375em; }
  #toc.toc2 > ul { font-size: 0.95em; }
  #toc.toc2 ul ul { padding-left: 1.25em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 20em; } }
#content #toc { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; -webkit-border-radius: 6px; border-radius: 6px; }
#content #toc > :first-child { margin-top: 0; }
#content #toc > :last-child { margin-bottom: 0; }

#footer { max-width: 100%; background: black; padding: 1.25em; }

#footer-text { color: white; line-height: 1.35; }

#content { margin-bottom: 0.625em; }

.sect1 { padding-bottom: 0.625em; }

@media only screen and (min-width: 768px) { #content { margin-bottom: 1.25em; }
  .sect1 { padding-bottom: 1.25em; } }
.sect1:last-child { padding-bottom: 0; }

.sect1 + .sect1 { border-top: 1px solid #dddddd; }

#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor { position: absolute; z-index: 1001; width: 1.5ex; margin-left: -1.5ex; display: block; text-decoration: none !important; visibility: hidden; text-align: center; font-weight: normal; }
#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before { content: "\00A7"; font-size: 0.85em; display: block; padding-top: 0.1em; }
#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover { visibility: visible; }
#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link { color: #ffffff; text-decoration: none; }
#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover { color: #ffffff; }

details, .audioblock, .imageblock, .literalblock, .listingblock, .stemblock, .videoblock { margin-bottom: 1.25em; }

details > summary:first-of-type { cursor: pointer; display: list-item; outline: none; margin-bottom: 0.75em; }

.admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { text-rendering: optimizeLegibility; text-align: left; }

table.tableblock.fit-content > caption.title { white-space: nowrap; width: 0; }

.paragraph.lead > p, #preamble > .sectionbody > [class="paragraph"]:first-of-type p { font-size: 1.21875em; line-height: 1.6; color: #111111; }

table.tableblock #preamble > .sectionbody > [class="paragraph"]:first-of-type p { font-size: inherit; }

.admonitionblock > table { border-collapse: separate; border: 0; background: none; width: 100%; }
.admonitionblock > table td.icon { text-align: center; width: 80px; }
.admonitionblock > table td.icon img { max-width: none; }
.admonitionblock > table td.icon .title { font-weight: bold; font-family: ff-meta-web-pro-1, ff-meta-web-pro-2, Arial, "Helvetica Neue", sans-serif; text-transform: uppercase; }
.admonitionblock > table td.content { padding-left: 1.125em; padding-right: 1.25em; border-left: 1px solid #dddddd; color: #748590; }
.admonitionblock > table td.content > :last-child > :last-child { margin-bottom: 0; }

.exampleblock > .content { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: white; -webkit-border-radius: 6px; border-radius: 6px; }
.exampleblock > .content > :first-child { margin-top: 0; }
.exampleblock > .content > :last-child { margin-bottom: 0; }

.sidebarblock { border-style: solid; border-width: 1px; border-color: #d4d4d4; margin-bottom: 1.25em; padding: 1.25em; background: #ededed; -webkit-border-radius: 6px; border-radius: 6px; }
.sidebarblock > :first-child { margin-top: 0; }
.sidebarblock > :last-child { margin-bottom: 0; }
.sidebarblock > .content > .title { color: #6c818f; margin-top: 0; }

.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child, .sidebarblock > .content > :last-child > :last-child, .sidebarblock > .content .olist > ol > li:last-child > :last-child, .sidebarblock > .content .ulist > ul > li:last-child > :last-child, .sidebarblock > .content .qlist > ol > li:last-child > :last-child { margin-bottom: 0; }

.literalblock pre, .listingblock > .content > pre { border: 1px solid #cccccc; -webkit-border-radius: 6px; border-radius: 6px; word-wrap: break-word; overflow-x: auto; padding: 0.5em; font-size: 0.8125em; }
@media only screen and (min-width: 768px) { .literalblock pre, .listingblock > .content > pre { font-size: 0.90625em; } }
@media only screen and (min-width: 1280px) { .literalblock pre, .listingblock > .content > pre { font-size: 1em; } }

.literalblock pre, .listingblock > .content > pre:not(.highlight), .listingblock > .content > pre[class="highlight"], .listingblock > .content > pre[class^="highlight "] { background: #eeeeee; }

.literalblock.output pre { color: #eeeeee; background-color: inherit; }

.listingblock > .content { position: relative; }

.listingblock code[data-lang]:before { display: none; content: attr(data-lang); position: absolute; font-size: 0.75em; top: 0.425rem; right: 0.5rem; line-height: 1; text-transform: uppercase; color: inherit; opacity: 0.5; }

.listingblock:hover code[data-lang]:before { display: block; }

.listingblock.terminal pre .command:before { content: attr(data-prompt); padding-right: 0.5em; color: inherit; opacity: 0.5; }

.listingblock.terminal pre .command:not([data-prompt]):before { content: "$"; }

.listingblock pre.highlightjs { padding: 0; }
.listingblock pre.highlightjs > code { padding: 0.5em; -webkit-border-radius: 6px; border-radius: 6px; }

.prettyprint { background: #eeeeee; }

pre.prettyprint .linenums { line-height: 1.2; margin-left: 2em; }

pre.prettyprint li { background: none; list-style-type: inherit; padding-left: 0; }

pre.prettyprint li code[data-lang]:before { opacity: 1; }

pre.prettyprint li:not(:first-child) code[data-lang]:before { display: none; }

table.linenotable { border-collapse: separate; border: 0; margin-bottom: 0; background: none; }
table.linenotable td[class] { color: inherit; vertical-align: top; padding: 0; line-height: inherit; white-space: normal; }
table.linenotable td.code { padding-left: 0.75em; }
table.linenotable td.linenos { border-right: 1px solid currentColor; opacity: 0.35; padding-right: 0.5em; }

pre.pygments .lineno { border-right: 1px solid currentColor; opacity: 0.35; display: inline-block; margin-right: 0.75em; }
pre.pygments .lineno:before { content: ""; margin-right: -0.125em; }

.quoteblock { margin: 0 1em 1.25em 1.5em; display: table; }
.quoteblock:not(.excerpt) > .title { margin-left: -1.5em; margin-bottom: 0.75em; }
.quoteblock blockquote, .quoteblock p { color: #909ea7; font-size: 1.15rem; line-height: 1.75; word-spacing: 0.1em; letter-spacing: 0; font-style: italic; text-align: justify; }
.quoteblock blockquote { margin: 0; padding: 0; border: 0; }
.quoteblock blockquote:before { content: "\201c"; float: left; font-size: 2.75em; font-weight: bold; line-height: 0.6em; margin-left: -0.6em; color: #6c818f; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1); }
.quoteblock blockquote > .paragraph:last-child p { margin-bottom: 0; }
.quoteblock .attribution { margin-top: 0.75em; margin-right: 0.5ex; text-align: right; }

.verseblock { margin: 0 1em 1.25em 1em; }
.verseblock pre { font-family: "Open Sans", "DejaVu Sans", sans; font-size: 1.15rem; color: #909ea7; font-weight: 300; text-rendering: optimizeLegibility; }
.verseblock pre strong { font-weight: 400; }
.verseblock .attribution { margin-top: 1.25rem; margin-left: 0.5ex; }

.quoteblock .attribution, .verseblock .attribution { font-size: 0.8125em; line-height: 1.45; font-style: italic; }
.quoteblock .attribution br, .verseblock .attribution br { display: none; }
.quoteblock .attribution cite, .verseblock .attribution cite { display: block; letter-spacing: -0.025em; color: #748590; }

.quoteblock.abstract blockquote:before, .quoteblock.excerpt blockquote:before, .quoteblock .quoteblock blockquote:before { display: none; }
.quoteblock.abstract blockquote, .quoteblock.abstract p, .quoteblock.excerpt blockquote, .quoteblock.excerpt p, .quoteblock .quoteblock blockquote, .quoteblock .quoteblock p { line-height: 1.6; word-spacing: 0; }
.quoteblock.abstract { margin: 0 1em 1.25em 1em; display: block; }
.quoteblock.abstract > .title { margin: 0 0 0.375em 0; font-size: 1.15em; text-align: center; }
.quoteblock.excerpt > blockquote, .quoteblock .quoteblock { padding: 0 0 0.25em 1em; border-left: 0.25em solid #dddddd; }
.quoteblock.excerpt, .quoteblock .quoteblock { margin-left: 0; }
.quoteblock.excerpt blockquote, .quoteblock.excerpt p, .quoteblock .quoteblock blockquote, .quoteblock .quoteblock p { color: inherit; font-size: 1.0625rem; }
.quoteblock.excerpt .attribution, .quoteblock .quoteblock .attribution { color: inherit; text-align: left; margin-right: 0; }

table.tableblock { max-width: 100%; border-collapse: separate; }

p.tableblock:last-child { margin-bottom: 0; }

td.tableblock > .content { margin-bottom: 1.25em; }
td.tableblock > .content > :last-child { margin-bottom: -1.25em; }

table.tableblock, th.tableblock, td.tableblock { border: 0 solid #dddddd; }

table.grid-all > thead > tr > .tableblock, table.grid-all > tbody > tr > .tableblock { border-width: 0 0 0 0; }

table.grid-all > tfoot > tr > .tableblock { border-width: 0 0 0 0; }

table.grid-cols > * > tr > .tableblock { border-width: 0 0 0 0; }

table.grid-rows > thead > tr > .tableblock, table.grid-rows > tbody > tr > .tableblock { border-width: 0 0 0 0; }

table.grid-rows > tfoot > tr > .tableblock { border-width: 0 0 0 0; }

table.grid-all > * > tr > .tableblock:last-child, table.grid-cols > * > tr > .tableblock:last-child { border-right-width: 0; }

table.grid-all > tbody > tr:last-child > .tableblock, table.grid-all > thead:last-child > tr > .tableblock, table.grid-rows > tbody > tr:last-child > .tableblock, table.grid-rows > thead:last-child > tr > .tableblock { border-bottom-width: 0; }

table.frame-all { border-width: 0; }

table.frame-sides { border-width: 0 0; }

table.frame-topbot, table.frame-ends { border-width: 0 0; }

table.stripes-all tr, table.stripes-odd tr:nth-of-type(odd), table.stripes-even tr:nth-of-type(even), table.stripes-hover tr:hover { background: none; }

th.halign-left, td.halign-left { text-align: left; }

th.halign-right, td.halign-right { text-align: right; }

th.halign-center, td.halign-center { text-align: center; }

th.valign-top, td.valign-top { vertical-align: top; }

th.valign-bottom, td.valign-bottom { vertical-align: bottom; }

th.valign-middle, td.valign-middle { vertical-align: middle; }

table thead th, table tfoot th { font-weight: bold; }

tbody tr th { display: table-cell; line-height: 1.5; background: none; }

tbody tr th, tbody tr th p, tfoot tr th, tfoot tr th p { color: #222222; font-weight: bold; }

p.tableblock > code:only-child { background: none; padding: 0; }

p.tableblock { font-size: 1em; }

ol { margin-left: 0.25em; }

ul li ol { margin-left: 0; }

dl dd { margin-left: 1.125em; }

dl dd:last-child, dl dd:last-child > :last-child { margin-bottom: 0; }

ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .ulist, .ulist .olist, .olist .ulist { margin-bottom: 0.625em; }

ul.checklist, ul.none, ol.none, ul.no-bullet, ol.no-bullet, ol.unnumbered, ul.unstyled, ol.unstyled { list-style-type: none; }

ul.no-bullet, ol.no-bullet, ol.unnumbered { margin-left: 0.625em; }

ul.unstyled, ol.unstyled { margin-left: 0; }

ul.checklist { margin-left: 0.625em; }

ul.checklist li > p:first-child > .fa-square-o:first-child, ul.checklist li > p:first-child > .fa-check-square-o:first-child { width: 1.25em; font-size: 0.8em; position: relative; bottom: 0.125em; }

ul.checklist li > p:first-child > input[type="checkbox"]:first-child { margin-right: 0.25em; }

ul.inline { display: -ms-flexbox; display: -webkit-box; display: flex; -ms-flex-flow: row wrap; -webkit-flex-flow: row wrap; flex-flow: row wrap; list-style: none; margin: 0 0 0.625em -1.25em; }

ul.inline > li { margin-left: 1.25em; }

.unstyled dl dt { font-weight: normal; font-style: normal; }

ol.arabic { list-style-type: decimal; }

ol.decimal { list-style-type: decimal-leading-zero; }

ol.loweralpha { list-style-type: lower-alpha; }

ol.upperalpha { list-style-type: upper-alpha; }

ol.lowerroman { list-style-type: lower-roman; }

ol.upperroman { list-style-type: upper-roman; }

ol.lowergreek { list-style-type: lower-greek; }

.hdlist > table, .colist > table { border: 0; background: none; }
.hdlist > table > tbody > tr, .colist > table > tbody > tr { background: none; }

td.hdlist1, td.hdlist2 { vertical-align: top; padding: 0 0.625em; }

td.hdlist1 { font-weight: bold; padding-bottom: 1.25em; }

.literalblock + .colist, .listingblock + .colist { margin-top: -0.5em; }

.colist td:not([class]):first-child { padding: 0.4em 0.75em 0 0.75em; line-height: 1; vertical-align: top; }
.colist td:not([class]):first-child img { max-width: none; }
.colist td:not([class]):last-child { padding: 0.25em 0; }

.thumb, .th { line-height: 0; display: inline-block; border: solid 4px white; -webkit-box-shadow: 0 0 0 1px #dddddd; box-shadow: 0 0 0 1px #dddddd; }

.imageblock.left { margin: 0.25em 0.625em 1.25em 0; }
.imageblock.right { margin: 0.25em 0 1.25em 0.625em; }
.imageblock > .title { margin-bottom: 0; }
.imageblock.thumb, .imageblock.th { border-width: 6px; }
.imageblock.thumb > .title, .imageblock.th > .title { padding: 0 0.125em; }

.image.left, .image.right { margin-top: 0.25em; margin-bottom: 0.25em; display: inline-block; line-height: 0; }
.image.left { margin-right: 0.625em; }
.image.right { margin-left: 0.625em; }

a.image { text-decoration: none; display: inline-block; }
a.image object { pointer-events: none; }

sup.footnote, sup.footnoteref { font-size: 0.875em; position: static; vertical-align: super; }
sup.footnote a, sup.footnoteref a { text-decoration: none; }
sup.footnote a:active, sup.footnoteref a:active { text-decoration: underline; }

#footnotes { padding-top: 0.75em; padding-bottom: 0.75em; margin-bottom: 0.625em; }
#footnotes hr { width: 20%; min-width: 6.25em; margin: -0.25em 0 0.75em 0; border-width: 1px 0 0 0; }
#footnotes .footnote { padding: 0 0.375em 0 0.225em; line-height: 1.3334; font-size: 0.875em; margin-left: 1.2em; margin-bottom: 0.2em; }
#footnotes .footnote a:first-of-type { font-weight: bold; text-decoration: none; margin-left: -1.05em; }
#footnotes .footnote:last-of-type { margin-bottom: 0; }
#content #footnotes { margin-top: -0.625em; margin-bottom: 0; padding: 0.75em 0; }

.gist .file-data > table { border: 0; background: #fff; width: 100%; margin-bottom: 0; }
.gist .file-data > table td.line-data { width: 99%; }

div.unbreakable { page-break-inside: avoid; }

.big { font-size: larger; }

.small { font-size: smaller; }

.underline { text-decoration: underline; }

.overline { text-decoration: overline; }

.line-through { text-decoration: line-through; }

.aqua { color: #00bfbf; }

.aqua-background { background-color: #00fafa; }

.black { color: black; }

.black-background { background-color: black; }

.blue { color: #0000bf; }

.blue-background { background-color: #0000fa; }

.fuchsia { color: #bf00bf; }

.fuchsia-background { background-color: #fa00fa; }

.gray { color: #606060; }

.gray-background { background-color: #7d7d7d; }

.green { color: #006000; }

.green-background { background-color: #007d00; }

.lime { color: #00bf00; }

.lime-background { background-color: #00fa00; }

.maroon { color: #600000; }

.maroon-background { background-color: #7d0000; }

.navy { color: #000060; }

.navy-background { background-color: #00007d; }

.olive { color: #606000; }

.olive-background { background-color: #7d7d00; }

.purple { color: #600060; }

.purple-background { background-color: #7d007d; }

.red { color: #bf0000; }

.red-background { background-color: #fa0000; }

.silver { color: #909090; }

.silver-background { background-color: #bcbcbc; }

.teal { color: #006060; }

.teal-background { background-color: #007d7d; }

.white { color: #bfbfbf; }

.white-background { background-color: #fafafa; }

.yellow { color: #bfbf00; }

.yellow-background { background-color: #fafa00; }

span.icon > .fa { cursor: default; }
a span.icon > .fa { cursor: inherit; }

.admonitionblock td.icon [class^="fa icon-"] { font-size: 2.5em; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); cursor: default; }
.admonitionblock td.icon .icon-note:before { content: "\f05a"; color: #333333; }
.admonitionblock td.icon .icon-tip:before { content: "\f0eb"; text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8); color: #111; }
.admonitionblock td.icon .icon-warning:before { content: "\f071"; color: #bf6900; }
.admonitionblock td.icon .icon-caution:before { content: "\f06d"; color: #bf3400; }
.admonitionblock td.icon .icon-important:before { content: "\f06a"; color: #bf0000; }

.conum[data-value] { display: inline-block; color: #fff !important; background-color: black; -webkit-border-radius: 50%; border-radius: 50%; text-align: center; font-size: 0.75em; width: 1.67em; height: 1.67em; line-height: 1.67em; font-family: "Open Sans", "DejaVu Sans", sans-serif; font-style: normal; font-weight: bold; }
.conum[data-value] * { color: #fff !important; }
.conum[data-value] + b { display: none; }
.conum[data-value]:after { content: attr(data-value); }
pre .conum[data-value] { position: relative; top: -0.125em; }

b.conum * { color: inherit !important; }

.conum:not([data-value]):empty { display: none; }

h4 { color: #6c818f; }

.literalblock > .content > pre, .listingblock > .content > pre { -webkit-border-radius: 6px; border-radius: 6px; margin-left: 2em; margin-right: 2em; }

.admonitionblock { margin-left: 2em; margin-right: 2em; }
.admonitionblock > table { border: 1px solid #609060; border-top-width: 1.5em; background-color: #e9ffe9; border-collapse: separate; -webkit-border-radius: 0; border-radius: 0; }
.admonitionblock > table td.icon { padding-top: .5em; padding-bottom: .5em; }
.admonitionblock > table td.content { padding: .5em 1em; color: black; font-size: .9em; border-left: none; }

.sidebarblock { background-color: #e8ecef; border-color: #ccc; }
.sidebarblock > .content > .title { color: #444444; }

table.tableblock.grid-all { border-collapse: collapse; -webkit-border-radius: 0; border-radius: 0; }
table.tableblock.grid-all th.tableblock, table.tableblock.grid-all td.tableblock { border-bottom: 1px solid #aaa; }

#footer { background-color: #000000; padding: 2em; }

#footer-text { color: #ffffff; font-size: 0.8em; text-align: center; }

</style>
</head>
<body class="article toc2 toc-right">
<div id="header">
<h1>FlashForth 5 Quick Reference for PIC and AVR Microcontrollers</h1>
<div class="details">
<span id="author" class="author">Port of 2016 LaTeX document&#8201;&#8212;&#8201;2022-01-03</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_interpreter">1. Interpreter</a></li>
<li><a href="#_data_and_the_stack">2. Data and the stack</a>
<ul class="sectlevel2">
<li><a href="#_notation">2.1. Notation</a></li>
<li><a href="#_numbers_and_values">2.2. Numbers and values</a></li>
<li><a href="#_displaying_data">2.3. Displaying data</a></li>
<li><a href="#_stack_manipulation">2.4. Stack manipulation</a></li>
</ul>
</li>
<li><a href="#_operators">3. Operators</a>
<ul class="sectlevel2">
<li><a href="#_arithmetic_with_single_cell_numbers">3.1. Arithmetic with single-cell numbers</a></li>
<li><a href="#_arithmetic_with_double_cell_numbers">3.2. Arithmetic with double-cell numbers</a></li>
<li><a href="#_arithmetic_with_triple_and_quad_numbers">3.3. Arithmetic with triple- and quad-numbers</a></li>
<li><a href="#_relational">3.4. Relational</a></li>
<li><a href="#_bitwise">3.5. Bitwise</a></li>
</ul>
</li>
<li><a href="#_memory">4. Memory</a>
<ul class="sectlevel2">
<li><a href="#_pic18_memory_map">4.1. PIC18 Memory map</a></li>
<li><a href="#_pic24_memory_map">4.2. PIC24 Memory map</a></li>
<li><a href="#_avr8_memory_map">4.3. AVR8 Memory map</a></li>
<li><a href="#_memory_context">4.4. Memory Context</a></li>
<li><a href="#_accessing_memory">4.5. Accessing Memory</a></li>
<li><a href="#_accessing_extended_flash_memory">4.6. Accessing Extended (Flash) Memory</a></li>
<li><a href="#_accessing_bits_in_ram">4.7. Accessing bits in RAM</a></li>
</ul>
</li>
<li><a href="#_the_dictionary">5. The Dictionary</a>
<ul class="sectlevel2">
<li><a href="#_dictionary_management">5.1. Dictionary management</a></li>
<li><a href="#_defining_constants_and_variables">5.2. Defining constants and variables</a></li>
<li><a href="#_examples">5.3. Examples</a></li>
<li><a href="#_defining_compound_data_objects">5.4. Defining compound data objects</a></li>
<li><a href="#_array_examples">5.5. Array examples</a></li>
<li><a href="#_memory_operations">5.6. Memory operations</a></li>
<li><a href="#_predefined_constants">5.7. Predefined constants</a></li>
<li><a href="#_predefined_variables">5.8. Predefined variables</a></li>
</ul>
</li>
<li><a href="#_floating_point_for_pic24_30_33">6. Floating-point for PIC24-30-33</a></li>
<li><a href="#_the_compiler">7. The Compiler</a>
<ul class="sectlevel2">
<li><a href="#_defining_functions">7.1. Defining functions</a></li>
<li><a href="#_comments">7.2. Comments</a></li>
<li><a href="#_examples_of_colon_definitions">7.3. Examples of colon definitions</a></li>
</ul>
</li>
<li><a href="#_flow_control">8. Flow control</a>
<ul class="sectlevel2">
<li><a href="#_structured_flow_control">8.1. Structured flow control</a></li>
<li><a href="#_loop_examples">8.2. Loop examples</a></li>
<li><a href="#_case_example">8.3. Case example</a></li>
<li><a href="#_unstructured_flow_control">8.4. Unstructured flow control</a></li>
<li><a href="#_vectored_execution_function_pointers">8.5. Vectored execution (Function pointers)</a></li>
<li><a href="#_autostart_example">8.6. Autostart example</a></li>
<li><a href="#_interrupt_example">8.7. Interrupt example</a></li>
</ul>
</li>
<li><a href="#_the_p_register">9. The P register</a></li>
<li><a href="#_characters">10. Characters</a>
<ul class="sectlevel2">
<li><a href="#_strings">10.1. Strings</a></li>
<li><a href="#_pictured_numeric_output">10.2. Pictured numeric output</a></li>
</ul>
</li>
<li><a href="#_interaction_with_the_operator">11. Interaction with the operator</a>
<ul class="sectlevel2">
<li><a href="#_serial_communication_ports">11.1. Serial communication ports</a></li>
<li><a href="#_character_queues_on_pic24_30_33">11.2. Character queues on PIC24-30-33</a></li>
<li><a href="#_other_hardware">11.3. Other Hardware</a></li>
</ul>
</li>
<li><a href="#_multitasking">12. Multitasking</a></li>
<li><a href="#_structured_assembler">13. Structured Assembler</a></li>
<li><a href="#_assembler_words_for_pic18">14. Assembler words for PIC18</a>
<ul class="sectlevel2">
<li><a href="#_conditions_for_structured_flow_control">14.1. Conditions for structured flow control</a></li>
<li><a href="#_destination_and_access_modifiers">14.2. Destination and access modifiers</a></li>
<li><a href="#_byte_oriented_file_register_operations">14.3. Byte-oriented file register operations</a></li>
<li><a href="#_bit_oriented_file_register_operations">14.4. Bit-oriented file register operations</a></li>
<li><a href="#_literal_operations">14.5. Literal operations</a></li>
<li><a href="#_data_memoryprogram_memory_operations">14.6. Data memory&#8201;&#8212;&#8201;program memory operations</a></li>
<li><a href="#_low_level_flow_control_operations">14.7. Low-level flow control operations</a></li>
<li><a href="#_other_mcu_control_operations">14.8. Other MCU control operations</a></li>
</ul>
</li>
<li><a href="#_assembler_words_for_pic24_30_33">15. Assembler words for PIC24-30-33</a>
<ul class="sectlevel2">
<li><a href="#_conditions_for_structured_flow_control_2">15.1. Conditions for structured flow control</a></li>
<li><a href="#_low_level_flow_control_operations_2">15.2. Low-level flow control operations</a></li>
<li><a href="#_bit_oriented_operations">15.3. Bit-oriented operations</a></li>
</ul>
</li>
<li><a href="#_assembler_words_for_avr8">16. Assembler words for AVR8</a>
<ul class="sectlevel2">
<li><a href="#_conditions_for_structured_flow_control_3">16.1. Conditions for structured flow control</a></li>
<li><a href="#_register_constants">16.2. Register constants</a></li>
<li><a href="#_arithmetic_and_logic_instructions">16.3. Arithmetic and logic instructions</a></li>
<li><a href="#_branch_instructions">16.4. Branch instructions</a></li>
<li><a href="#_data_transfer_instructions">16.5. Data transfer instructions</a></li>
<li><a href="#_bit_and_bit_test_instructions">16.6. Bit and bit-test instructions</a></li>
<li><a href="#_mcu_control_instructions">16.7. MCU control instructions</a></li>
</ul>
</li>
<li><a href="#_synchronous_serial_communication">17. Synchronous serial communication</a>
<ul class="sectlevel2">
<li><a href="#_i2c_communications_as_master">17.1. I<sup>2</sup>C communications as master</a></li>
<li><a href="#_alternate_set_i2c_words_for_pic18">17.2. Alternate set I<sup>2</sup>C words for PIC18</a></li>
<li><a href="#_spi_communications_as_master">17.3. SPI communications as master</a></li>
</ul>
</li>
<li><a href="#_bibliography">Bibliography</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_interpreter">1. Interpreter</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The outer interpreter looks for words and numbers delimited by whitespace.
Everything is interpreted as a word or a number.
Numbers are pushed onto the stack.
Words are looked up and acted upon.
Names of words are limited to 15 characters.
Some words are compile-time use only and cannot be used interpretively.
These are noted in the result column.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_data_and_the_stack">2. Data and the stack</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The data stack (S:) is directly accessible and has 16-bit cells for holding numerical values.
Functions get their arguments from the stack and leave their results there as well.
There is also a return address stack (R:) that can be used for temporary storage.</p>
</div>
<div class="sect2">
<h3 id="_notation">2.1. Notation</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Notation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Meaning</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>n, n1, n2, n3</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Single-cell integers (16-bit).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>u, u1, u2</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unsigned integers (16-bit).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>x, x1, x2, x3</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Single-cell item (16-bit).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>c</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Character value (8-bit).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>d ud</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Double-cell signed and unsigned (32-bit).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>t ut</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Triple-cell signed and unsigned (48-bit).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>q uq</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Quad-cell signed and unsigned (64-bit).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean flag: 0 is false, -1 is true.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>flt flt1 flt3</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Floating-point value (32-bit). PIC24-30-33 only, with build option.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>addr, addr1, addr2</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">16-bit addresses.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>a-addr</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">cell-aligned address.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>c-addr</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">character or byte address.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>addr.d</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32-bit address.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_numbers_and_values">2.2. Numbers and values</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave integer two onto the stack. <code>(&#8201;&#8212;&#8201;2 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>#255</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave decimal 255 onto the stack. <code>(&#8201;&#8212;&#8201;255 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>%11</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave integer three onto the stack. <code>(&#8201;&#8212;&#8201;3 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$10</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave integer sixteen onto the stack. <code>(&#8201;&#8212;&#8201;16 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>23.</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave double number on the stack. <code>(&#8201;&#8212;&#8201;23 0 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>decimal</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set number format to base 10. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hex</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set number format to hexadecimal. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set number format to binary. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>s&gt;d</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sign extend single to double number. <code>( n&#8201;&#8212;&#8201;d )</code><br>
  Since double numbers have the most significant bits
  in the cell above the least significant bits, you can
  just <code>drop</code> the top cell to recover the single number,
  provided that the value is not too large to fit in a
  single cell.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>d&gt;q</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Extend double to quad-cell number. <code>( d&#8201;&#8212;&#8201;q )</code><br>
  Requires <code>qmath.fs</code> to be loaded.  PIC18, PIC24-30-33.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_displaying_data">2.3. Displaying data</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Word</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>.</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Display a number. <code>( n&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>u.</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Display u unsigned. <code>( u&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>u.r</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Display u with field width n, 0&lt;n&lt;256. <code>( u n&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>d.</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Display double number.  <code>( d&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ud.</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Display unsigned double number. <code>( ud&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>.s</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Display stack content (nondestructively).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>.st</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Emit status string for base, current data section, and display the stack contents. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>?</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Display content at address. <code>( addr&#8201;&#8212;&#8201;)</code> PIC24-30-33</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dump</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Display memory from address, for u bytes. <code>( addr u&#8201;&#8212;&#8201;)</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_stack_manipulation">2.4. Stack manipulation</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Word</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dup</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Duplicate top item. <code>( x&#8201;&#8212;&#8201;x x )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>?dup</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Duplicate top item if nonzero. <code>( x&#8201;&#8212;&#8201;0 | x x )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>swap</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Swap top two items. <code>( x1 x2&#8201;&#8212;&#8201;x2 x1 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>over</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Copy second item to top. <code>( x1 x2&#8201;&#8212;&#8201;x1 x2 x1 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>drop</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Discard top item. <code>( x&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>nip</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Remove x1 from the stack. <code>( x1 x2&#8201;&#8212;&#8201;x2 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rot</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rotate top three items. <code>( x1 x2 x3&#8201;&#8212;&#8201;x2 x3 x1 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tuck</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Insert x2 below x1 in the stack. <code>( x1 x2&#8201;&#8212;&#8201;x2 x1 x2 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pick</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Duplicate the u-th item on top. <code>( xu &#8230;&#8203; x0 u&#8201;&#8212;&#8201;xu &#8230;&#8203; x0 xu )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2dup</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Duplicate top double-cell item. <code>( d&#8201;&#8212;&#8201;d d )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2swap</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Swap top two double-cell items. <code>( d1 d2&#8201;&#8212;&#8201;d2 d1 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2over</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Copy second double item to top. <code>( d1 d2&#8201;&#8212;&#8201;d1 d2 d1 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2drop</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Discard top double-cell item. <code>( d&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&gt;r</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Send to return stack. <code>S:( n&#8201;&#8212;&#8201;) R:(&#8201;&#8212;&#8201;n )</code> <em>compile only</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>r&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Take from return stack. <code>S:(&#8201;&#8212;&#8201;n ) R:( n&#8201;&#8212;&#8201;)</code> <em>compile only</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>r@</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Copy top item of return stack. <code>S:(&#8201;&#8212;&#8201;n ) R:( n&#8201;&#8212;&#8201;n )</code> <em>compile only</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rdrop</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Discard top item of return stack. <code>S:(&#8201;&#8212;&#8201;) R:( n&#8201;&#8212;&#8201;)</code> <em>compile only</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sp@</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave data stack pointer. <code>(&#8201;&#8212;&#8201;addr )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sp`</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set the data stack pointer to address. <code>( addr&#8201;&#8212;&#8201;)</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_operators">3. Operators</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_arithmetic_with_single_cell_numbers">3.1. Arithmetic with single-cell numbers</h3>
<div class="paragraph">
<p>Some of these words require <code>core.fs</code> and <code>math.fs</code>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Word</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>+</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add. <code>( n1 n2&#8201;&#8212;&#8201;n1+n2 )</code> sum</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subtract. <code>( n1 n2&#8201;&#8212;&#8201;n1-n2 )</code> difference</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>*</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Multiply. <code>( n1 n2&#8201;&#8212;&#8201;n1*n2 )</code> product</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Divide. <code>( n1 n2&#8201;&#8212;&#8201;n1/n2 )</code> quotient</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mod</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Divide. <code>( n1 n2&#8201;&#8212;&#8201;n.rem )</code> remainder</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/mod</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Divide. <code>( n1 n2&#8201;&#8212;&#8201;n.rem n.quot )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>u/</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unsigned 16/16 to 16-bit division. <code>( u1 u2&#8201;&#8212;&#8201;u2/u1 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>u/mod</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unsigned division. <code>( u1 u2&#8201;&#8212;&#8201;u.rem u.quot )</code> 16-bit/16-bit to 16-bit</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave one. <code>(&#8201;&#8212;&#8201;1 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1+</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add one. <code>( n&#8201;&#8212;&#8201;n1 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subtract one. <code>( n&#8201;&#8212;&#8201;n1 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2+</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add two.  <code>( n&#8201;&#8212;&#8201;n1 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subtract 2 from n. <code>( n&#8201;&#8212;&#8201;n1 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2*</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Multiply by 2; Shift left by one bit. <code>( u&#8201;&#8212;&#8201;u1 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2/</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Divide by 2; Shift right by one bit. <code>( u&#8201;&#8212;&#8201;u1 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>*/</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scale. <code>( n1 n2 n3&#8201;&#8212;&#8201;n1*n2/n3 )</code> Uses 32-bit intermediate result.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>*/mod</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scale with remainder. <code>( n1 n2 n3&#8201;&#8212;&#8201;n.rem n.quot )</code> Uses 32-bit intermediate result.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>u*/mod</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unsigned Scale u1*u2/u3 <code>( u1 u2 u3&#8201;&#8212;&#8201;u.rem u.quot )</code> Uses 32-bit intermediate result.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>abs</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Absolute value. <code>( n&#8201;&#8212;&#8201;u )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>negate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Negate n. <code>( n&#8201;&#8212;&#8201;-n )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>?negate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Negate n1 if n2 is negative. <code>( n1 n2&#8201;&#8212;&#8201;n3 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>min</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave minimum. <code>( n1 n2&#8201;&#8212;&#8201;n )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>max</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave maximum. <code>( n1 n2&#8201;&#8212;&#8201;n )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>umin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unsigned minimum. <code>( u1 u2&#8201;&#8212;&#8201;u )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>umax</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unsigned maximum. <code>( u1 u2&#8201;&#8212;&#8201;u )</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_arithmetic_with_double_cell_numbers">3.2. Arithmetic with double-cell numbers</h3>
<div class="paragraph">
<p>Some of these words require <code>core.fs</code>, <code>math.fs</code> and <code>qmath.fs</code>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Word</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>d+</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add double numbers. <code>( d1 d2&#8201;&#8212;&#8201;d1+d2 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>d-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subtract double numbers. <code>( d1 d2&#8201;&#8212;&#8201;d1-d2 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>m+</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add single cell to double number.  <code>( d1 n&#8201;&#8212;&#8201;d2 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>m*</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Signed 16*16 to 32-bit multiply.  <code>( n n&#8201;&#8212;&#8201;d )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>d2*</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Multiply by 2. <code>( d&#8201;&#8212;&#8201;d )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>d2/</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Divide by 2. <code>( d&#8201;&#8212;&#8201;d )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>um*</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unsigned 16x16 to 32 bit multiply. <code>( u1 u2&#8201;&#8212;&#8201;ud )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ud*</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unsigned 32x16 to 32-bit multiply. <code>( ud u&#8201;&#8212;&#8201;ud )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>um/mod</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unsigned division. <code>( ud u1&#8201;&#8212;&#8201;u.rem u.quot )</code> 32-bit/16-bit to 16-bit</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ud/mod</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unsigned division. <code>( ud u1&#8201;&#8212;&#8201;u.rem ud.quot )</code> 32-bit/16-bit to 32-bit</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fm/mod</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Floored division. <code>( d n&#8201;&#8212;&#8201;n.rem n.quot )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sm/rem</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Symmetric division. <code>( d n&#8201;&#8212;&#8201;n.rem n.quot )</code> 32-bit/16-bit to 16-bit.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>m*/</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scale with triple intermediate result. <code>d2 = d1*n1/n2</code> <code>( d1 n1 n2&#8201;&#8212;&#8201;d2 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>um*/</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scale with triple intermediate result. <code>ud2 = ud1*u1/u2</code> <code>( ud1 u1 u2&#8201;&#8212;&#8201;ud2)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dabs</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Absolute value. <code>( d&#8201;&#8212;&#8201;ud )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dnegate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Negate double number. <code>( d&#8201;&#8212;&#8201;-d )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>?dnegate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Negate d if n is negative. <code>( d n&#8201;&#8212;&#8201;-d )</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_arithmetic_with_triple_and_quad_numbers">3.3. Arithmetic with triple- and quad-numbers</h3>
<div class="paragraph">
<p>For PIC18, these words require <code>core.fs</code>, <code>math.fs</code> and <code>qmath.fs</code>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Word</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>q+</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add a quad to a quad. <code>( q1 q2&#8201;&#8212;&#8201;q3 )</code> For PIC24-30-33.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>qm+</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add double to a quad. <code>( q1 d&#8201;&#8212;&#8201;q2 )</code> For PIC18 and PIC24-30-33.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>uq*</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unsigned 32x32 to 64-bit multiply. <code>( ud ud&#8201;&#8212;&#8201;uq )</code> For PIC18 and PIC24-30-33.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ut*</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unsigned 32x16 to 48-bit multiply. <code>( ud u&#8201;&#8212;&#8201;ut )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ut/</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Divide triple by single. <code>( ut u&#8201;&#8212;&#8201;ud )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>uq/mod</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Divide quad by double. <code>( uq ud&#8201;&#8212;&#8201;ud-rem ud-quot )</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_relational">3.4. Relational</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Word</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>=</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave true if x1 x2 are equal. <code>( x1 x2&#8201;&#8212;&#8201;f )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave true if x1 x2 are not equal. <code>( x1 x2&#8201;&#8212;&#8201;f )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave true if n1 less than n2. <code>( n1 n2&#8201;&#8212;&#8201;f )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave true if n1 greater than n2. <code>( n1 n2&#8201;&#8212;&#8201;f )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0=</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave true if n is zero. <code>( n&#8201;&#8212;&#8201;f )</code> Inverts logical value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0&lt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave true if n is negative. <code>( n&#8201;&#8212;&#8201;f )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>within</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave true if xl &#8656; x &lt; xh. <code>( x xl xh&#8201;&#8212;&#8201;f )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>u&lt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave true if u1 &lt; u2. <code>( u1 u2&#8201;&#8212;&#8201;f )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>u&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave true if u1 &gt; u2. <code>( u1 u2&#8201;&#8212;&#8201;f )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>d=</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave true if d1 d2 are equal. <code>( d1 d2&#8201;&#8212;&#8201;f )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>d0=</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave true if d is zero. <code>( d&#8201;&#8212;&#8201;f )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>d0&lt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave true if d is negative. <code>( d&#8201;&#8212;&#8201;f )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>d&lt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave true if d1 &lt; d2. <code>( d1 d2&#8201;&#8212;&#8201;f )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>d&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave true if d1 &gt; d2. <code>( d1 d2&#8201;&#8212;&#8201;f )</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_bitwise">3.5. Bitwise</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Word</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>invert</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ones complement. <code>( x&#8201;&#8212;&#8201;x )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dinvert</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Invert double number.  <code>( du&#8201;&#8212;&#8201;du )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>and</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bitwise and. <code>( x1 x2&#8201;&#8212;&#8201;x )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>or</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bitwise or. <code>( x1 x2&#8201;&#8212;&#8201;x )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>xor</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bitwise exclusive-or. <code>( x&#8201;&#8212;&#8201;x )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lshift</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Left shift by u bits. <code>( x1 u&#8201;&#8212;&#8201;x2 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rshift</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Right shift by u bits. <code>( x1 u&#8201;&#8212;&#8201;x2 )</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_memory">4. Memory</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Typically, the microcontroller has three distinct memory contexts:
Flash, EEPROM and SRAM.
FlashForth unifies these memory spaces into a single 64kB address space.</p>
</div>
<div class="sect2">
<h3 id="_pic18_memory_map">4.1. PIC18 Memory map</h3>
<div class="paragraph">
<p>The address ranges are:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Range</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$0000</code>&#8201;&#8212;&#8201;<code>$ebff</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Flash</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$ec00</code>&#8201;&#8212;&#8201;<code>$efff</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EEPROM</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$f000</code>&#8201;&#8212;&#8201;<code>$ff5f</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SRAM, general use</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$ff60</code>&#8201;&#8212;&#8201;<code>$ffff</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SRAM, special function registers</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The high memory mark for each context will depend on the particular device used.
Using a PIC18F26K22 and the default values in <code>p18f-main.cfg</code>
for the UART version of FF, a total of 423 bytes is dedicated to the FF system.
The rest (3473 bytes) is free for application use.
Also, the full 64kB of Flash memory is truncated to fit within the
range specified above.</p>
</div>
</div>
<div class="sect2">
<h3 id="_pic24_memory_map">4.2. PIC24 Memory map</h3>
<div class="paragraph">
<p>A device with EEPROM will have its 64kB address space divided into:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Range</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$0000</code>&#8201;&#8212;&#8201;<code>$07ff</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SRAM, special function registers</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$0800</code>&#8201;&#8212;&#8201;<code>($0800+RAMSIZE-1)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SRAM, general use</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>($0800+RAMSIZE)</code>&#8201;&#8212;&#8201;<code>$fbff</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Flash</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$fc00</code>&#8201;&#8212;&#8201;<code>$ffff</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EEPROM</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The high memory mark for the Flash context will depend on the device.
Also, the full Flash memory of the device may not be accessible.</p>
</div>
</div>
<div class="sect2">
<h3 id="_avr8_memory_map">4.3. AVR8 Memory map</h3>
<div class="paragraph">
<p>All operations are restricted to 64kB byte address space that is divided into:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Range</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$0000</code>&#8201;&#8212;&#8201;<code>(RAMSIZE-1)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SRAM</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>RAMSIZE</code>&#8201;&#8212;&#8201;<code>(RAMSIZE+EEPROMSIZE-1)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EEPROM</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>($ffff-FLASHSIZE+1)</code>&#8201;&#8212;&#8201;<code>$ffff</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Flash</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The SRAM space includes the IO-space and special function registers.
The high memory mark for the Flash context is set by the combined size
of the boot area and FF kernel.</p>
</div>
</div>
<div class="sect2">
<h3 id="_memory_context">4.4. Memory Context</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Word</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ram</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set address context to SRAM. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>eeprom</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set address context to EEPROM. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>flash</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set address context to Flash. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fl-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Disable writes to Flash, EEPROM. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fl+</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable writes to Flash, EEPROM, default. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>iflush</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Flush the flash write buffer. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>here</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave the current data section dictionary pointer. <code>(&#8201;&#8212;&#8201;addr )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>align</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Align the current data section dictionary pointer to cell boundary. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hi</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave the high limit of the current data space. <code>(&#8201;&#8212;&#8201;u )</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_accessing_memory">4.5. Accessing Memory</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Word</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>!</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Store x to address. <code>( x a-addr&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fetch from address. <code>( a-addr&#8201;&#8212;&#8201;x )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@+</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fetch cell and increment address by cell size. <code>( a-addr1&#8201;&#8212;&#8201;a-addr2 x )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2!</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Store 2 cells to address. <code>( x1 x2 a-addr&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2@</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fetch 2 cells from address. <code>( a-addr&#8201;&#8212;&#8201;x1 x2 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>c!</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Store character to address. <code>( c addr&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>c@</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fetch character from address. <code>( addr&#8201;&#8212;&#8201;c )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>c@+</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fetch char, increment address. <code>( addr1&#8201;&#8212;&#8201;addr2 c )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>+!</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add n to cell at address. <code>( n addr&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-@</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fetch from addr and decrement addr by 2. <code>( addr1&#8201;&#8212;&#8201;addr2 x )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&gt;a</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Write to the A register. <code>( x&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>a&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Read from the A register. <code>(&#8201;&#8212;&#8201;x )</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_accessing_extended_flash_memory">4.6. Accessing Extended (Flash) Memory</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Word</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>x!</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Store u to real flash address. <code>( u addr.d&#8201;&#8212;&#8201;)</code> PIC18, AVR8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>x!</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Store u to real flash address. <code>( ud addr.d&#8201;&#8212;&#8201;)</code> PIC24-30-33</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>x@</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fetch from real flash address. <code>( addr.d&#8201;&#8212;&#8201;u )</code> PIC18, AVR8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>x@</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fetch from real flash address. <code>( addr.d&#8201;&#8212;&#8201;ud )</code> PIC24-30-33</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_accessing_bits_in_ram">4.7. Accessing bits in RAM</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Word</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mset</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set bits in file register with mask c. <code>( c addr&#8201;&#8212;&#8201;)</code> For PIC24-30-33, the mask is 16 bits.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mclr</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clear bits in file register with mask c. <code>( c addr&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mtst</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AND file register byte with mask c. <code>( c addr&#8201;&#8212;&#8201;x )</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The following come from <code>bit.fs</code></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bit1:</code> <em>name</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Define a word to set a bit. <code>( addr bit&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bit0:</code> <em>name</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Define a word to clear a bit. <code>( addr bit&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bit?:</code> <em>name</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Define a word to test a bit. <code>( addr bit&#8201;&#8212;&#8201;)</code><br>
                   When executed, <em>name</em> leaves a flag. <code>(&#8201;&#8212;&#8201;f )</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_dictionary">5. The Dictionary</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_dictionary_management">5.1. Dictionary management</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>marker -my-mark</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mark the dictionary and memory allocation state with <code>-my-mark</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-my-mark</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return to the dictionary and allotted-memory state that existed before <code>-my-mark</code> was created.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>find</code> <em>name</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Find name in dictionary. <code>(&#8201;&#8212;&#8201;n )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave 1 immediate, -1 normal, 0 not found.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>forget</code> <em>name</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Forget dictionary entries back to <em>name</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>empty</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reset all dictionary and allotted-memory pointers. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>words</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List all words in dictionary. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>words</code> <em>xxx</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List words containing <em>xxx</em>. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_defining_constants_and_variables">5.2. Defining constants and variables</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>constant</code> <em>name</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Define new constant. <code>( n&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2constant</code> <em>name</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Define double constant. <code>( x x&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>name</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave value on stack. <code>(&#8201;&#8212;&#8201;n )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>variable</code> <em>varname</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Define a variable in the current data section. <code>(&#8201;&#8212;&#8201;)</code><br>
                         Use <code>ram</code>, <code>eeprom</code> or <code>flash</code> to set data section.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2variable</code> <em>name</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Define double variable. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>varname</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave address on stack.  <code>(&#8201;&#8212;&#8201;addr )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>value</code> <em>valname</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Define value. <code>( n&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>to</code> <em>valname</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Assign new value to <em>valname</em>. <code>( n&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>valname</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave value on stack.  <code>(&#8201;&#8212;&#8201;n )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>user</code> <em>name</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Define a user variable at offset <code>+n</code>. <code>( +n&#8201;&#8212;&#8201;)</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_examples">5.3. Examples</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ram</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set SRAM context for variables and values.
                            Be careful not to accidentally define variables in EEPROM or Flash memory.
                            That memory wears quickly with multiple writes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$ff81 constant portb</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Define constant in Flash.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>3 value xx</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Define value in SRAM.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>variable yy</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Define variable in SRAM.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>6 yy !</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Store 6 in variable <code>yy</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>eeprom 5 value zz ram</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Define value in EEPROM.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>xx yy zz portb yy @</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leaves <code>3 f172 5 ff81 6</code> on stack.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>warm</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Warm restart clears SRAM data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>xx yy zz portb yy @</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leaves <code>0 f172 5 ff81 0</code> on stack.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>4 to xx</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets new value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>xx yy zz portb yy @</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leaves <code>4 f172 5 ff81 0</code> on stack.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hi here - u.</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prints the number of bytes free.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$ff8a constant latb</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PortB latch for the PIC18.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$ff93 constant trisb</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PortB direction-control register.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>%00000010 trisb mclr</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets RB1 as output.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>latb 1 bit1: pb1-high</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines a word to set RB1 high.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pb1-high</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets RB1 high.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_defining_compound_data_objects">5.4. Defining compound data objects</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>create</code> <em>name</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create a word definition and store the current data section pointer.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>does&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Define the runtime action of a created word. <em>compile only</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>allot</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Advance the current data section dictionary pointer by u bytes. <code>( u&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Append x to the current data section. <code>( x&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>c,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Append c to the current data section. <code>( c&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>,"</code> <em>xxx</em> <code>"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Append a string at HERE. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>i,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Append x to the flash data section. <code>( x&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ic,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Append c to the flash data section. <code>( c&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cf,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compile xt into the flash dictionary. <code>( addr&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>c&gt;n</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Convert code field addr to name field addr. <code>( addr1&#8201;&#8212;&#8201;addr2 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>n&gt;c</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Convert name field addr to code field addr. <code>( addr1&#8201;&#8212;&#8201;addr2 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>n&gt;l</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Convert <code>nfa</code> to <code>lfa</code>. <code>( nfa&#8201;&#8212;&#8201;lfa )</code> Not implemented; use 2-! instead.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&gt;body</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave the parameter field address of the created word. <code>( xt&#8201;&#8212;&#8201;a-addr )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>:noname</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Define headerless forth code. <code>(&#8201;&#8212;&#8201;addr )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&gt;xa</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Convert a Flash virtual address to a real executable address. <code>( a-addr1&#8201;&#8212;&#8201;a-addr2 )</code> PIC24-30-33, ATmega</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>xa&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Convert a real executable address to a Flash virtual address. <code>( a-addr1&#8201;&#8212;&#8201;a-addr2 )</code> PIC24-30-33, ATmega</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_array_examples">5.5. Array examples</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 40%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Code</th>
<th class="tableblock halign-left valign-top">Comments</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre>ram</pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">We want these arrays made in RAM memory.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre>create my-array 20 allot
my-array 20 $ff fill
my-array 20 dump</pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create an array, fill it with 1s, and display its content.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre>create my-cell-array
  100 , 340 , 5 ,</pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initialise an array of cells.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre>my-cell-array 2 cells + @</pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should leave 5. <code>(&#8201;&#8212;&#8201;x )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre>create my-byte-array
  18 c, 21 c, 255 c,</pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initialised an array of bytes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre>my-byte-array 2 chars + c@</pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should leave 255. <code>(&#8201;&#8212;&#8201;c )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre>: mk-byte-array
    create allot
    does&gt; + ;</pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Make our own defining word to make byte array objects, as shown in the FF User&#8217;s Guide.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre>10 mk-byte-array my-bytes</pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Creates an array object my-bytes, which has stack effect <code>( n&#8201;&#8212;&#8201;addr )</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre>18 0 my-bytes c!</pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets an element. The execution <code>0 my-bytes</code> leaves the address of the first byte element on the stack.
  The execution of <code>c!</code> results in the number <code>18</code> being stored at that address.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre>21 1 my-bytes c!</pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets another.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre>255 2 my-bytes c!</pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">And another.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre>2 my-bytes c@</pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should leave 255. The execution of <code>2 my-bytes</code> leaves the address of the third byte element on the stack.
  The execution of <code>c@</code> fetches the byte at that address.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre>: mk-cell-array
    create cells allot
    does&gt; swap cells + ;</pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Make a defining word, this time to make cell array objects.
  Its stack effect is <code>( n&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre>5 mk-cell-array my-cells</pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Creates an array object <code>my-cells</code> whose stack effect is <code>( n&#8201;&#8212;&#8201;addr )</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre>3000 0 my-cells !</pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets an element.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre>45000 1 my-cells !</pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;and another.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre>63000 2 my-cells !</pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;and another.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre>1 my-cells @ .</pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should print <code>45000</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_memory_operations">5.6. Memory operations</h3>
<div class="paragraph">
<p>Some of these words come from <code>core.fs</code>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Word</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cmove</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Move <code>u</code> bytes from address-1 to address-2. <code>( addr1 addr2 u&#8201;&#8212;&#8201;)</code><br>
                Copy proceeds from low address to high address.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>wmove</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Move u cells from address-1 to address-2. <code>( addr1 addr2 u&#8201;&#8212;&#8201;)</code> PIC24-30-33 only</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fill</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fill u bytes with c starting at address. <code>( addr u c&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>erase</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fill u bytes with 0 starting at address. <code>( addr u&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>blanks</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fill u bytes with spaces starting at address. <code>( addr u&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cells</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Convert cells to address units. <code>( u&#8201;&#8212;&#8201;u )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>chars</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Convert chars to address units. <code>( u&#8201;&#8212;&#8201;u )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>char+</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add one to address. <code>( addr1&#8201;&#8212;&#8201;addr2 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cell+</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add size of cell to address. <code>( addr1&#8201;&#8212;&#8201;addr2 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>aligned</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Align address to a cell boundary. <code>( addr&#8201;&#8212;&#8201;a-addr )</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_predefined_constants">5.7. Predefined constants</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Word</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cell</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Size of one cell in characters. <code>(&#8201;&#8212;&#8201;n )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean true value. <code>(&#8201;&#8212;&#8201;-1 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean false value. <code>(&#8201;&#8212;&#8201;0 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ASCII space. <code>(&#8201;&#8212;&#8201;c )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Fcy</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave the cpu instruction-cycle frequency in kHz.  <code>(&#8201;&#8212;&#8201;u )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ti#</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Size of the terminal input buffer. <code>(&#8201;&#8212;&#8201;u )</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_predefined_variables">5.8. Predefined variables</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Word</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>base</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Variable containing number base. <code>(&#8201;&#8212;&#8201;a-addr )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>irq</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Interrupt vector (SRAM variable). <code>(&#8201;&#8212;&#8201;a-addr )</code><br>
              Always disable user interrupts and clear
              related interrupt enable bits before zeroing interrupt vector.<br>
              <code>di false to irq ei</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>turnkey</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vector for user start-up word. <code>(&#8201;&#8212;&#8201;a-addr )</code><br>
              This is an EEPROM value mirrored in SRAM.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prompt</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Deferred execution vector for the info displayed by quit. <code>(&#8201;&#8212;&#8201;a-addr )</code><br>
              Default value is <code>.st</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>'emit</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EMIT vector.  Default is <code>tx1</code> <code>(&#8201;&#8212;&#8201;a-addr )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>'key</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">KEY vector.  Default is <code>rx1</code> <code>(&#8201;&#8212;&#8201;a-addr )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>'key?</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">KEY? vector.  Default is <code>rx1?</code>  <code>(&#8201;&#8212;&#8201;a-addr )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>'source</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Current input source. <code>(&#8201;&#8212;&#8201;a-addr )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>latest</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Variable holding the address of the latest defined word. <code>(&#8201;&#8212;&#8201;a-addr )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>s0</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Variable for start of data stack. <code>(&#8201;&#8212;&#8201;a-addr )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>r0</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bottom of return stack. <code>(&#8201;&#8212;&#8201;a-addr )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rcnt</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of saved return stack cells. <code>(&#8201;&#8212;&#8201;a-addr )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tib</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Address of the terminal input buffer. <code>(&#8201;&#8212;&#8201;a-addr )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tiu</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Terminal input buffer pointer. <code>(&#8201;&#8212;&#8201;a-addr )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&gt;in</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Variable containing the offset, in characters,
              from the start of <code>tib</code> to the current parse area. <code>(&#8201;&#8212;&#8201;a-addr )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pad</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Address of the temporary area for strings. <code>(&#8201;&#8212;&#8201;addr )</code>
              <code>: pad tib ti# + ;</code><br>
              Each task has its own pad but has zero default size.
              If needed the user must allocate it separately with allot for each task.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dp</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave the address of the current data section
              dictionary pointer. <code>(&#8201;&#8212;&#8201;addr )</code><br>
              This is an EEPROM variable mirrored in RAM.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dps</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">End address of dictionary pointers. <code>(&#8201;&#8212;&#8201;d )</code>
              Absolute address of start of free Flash.
              Library and C code can be linked,
              starting at this address.  PIC24, dsPIC33</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hp</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hold pointer for formatted numeric output. <code>(&#8201;&#8212;&#8201;a-addr )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>up</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Variable holding a user pointer. <code>(&#8201;&#8212;&#8201;addr )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>float?</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Interpreter defer for parsing floating-point values.
              <code>' &gt;float is float?</code> PIC24-30-33 only</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_floating_point_for_pic24_30_33">6. Floating-point for PIC24-30-33</h2>
<div class="sectionbody">
<div class="paragraph">
<p>These words require that FlashForth has been built with the <code>.eq FLOATS, 1</code> option
in the relevant processor config file.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Word</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&gt;float</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Convert a string into a float. <code>( c-addr u&#8201;&#8212;&#8201;flt f )</code>
               Note that it works for decimal base only.<br>
               Examples: <code>1e10</code> <code>-1e10</code> <code>1.234e10</code> <code>-1.234e10</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f.</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Print in decimal format. <code>( flt&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fe.</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Print in engineering format. <code>( flt&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fs.</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Print in scientific format. <code>( flt&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fdrop</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Discard top float item. <code>( flt&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fdup</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Duplicate top float item. <code>( flt&#8201;&#8212;&#8201;flt flt )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fover</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Copy second float item to top.  <code>( flt1 flt2&#8201;&#8212;&#8201;flt1 flt2 flt1 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fswap</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Swap top two float items. <code>( flt1 flt2&#8201;&#8212;&#8201;flt2 flt1 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>frot</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rotate top three float items.
             <code>( flt1 flt2 flt3&#8201;&#8212;&#8201;flt2 flt3 flt1 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fnip</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Remove second top float. <code>( flt1 flt2&#8201;&#8212;&#8201;flt2 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ftuck</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Insert <code>flt2</code> below <code>flt1</code>. <code>( flt1 flt2&#8201;&#8212;&#8201;flt2 flt1 flt2 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>nfswap</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Swap float and single. <code>( flt n&#8201;&#8212;&#8201;n flt )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fnswap</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Swap float and single. <code>( n flt&#8201;&#8212;&#8201;flt n )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>nfover</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Copy float item over single. <code>( flt n&#8201;&#8212;&#8201;flt n flt )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fnover</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Copy single over float item. <code>( n flt&#8201;&#8212;&#8201;n flt n)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f@</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fetch float item to stack. <code>( addr&#8201;&#8212;&#8201;flt )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f!</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Store float item to address. <code>( flt addr&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fconstant</code> <em>name</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Define constant. <code>( flt&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fvariable</code> <em>name</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Define variable. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fliteral</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compile in literal value. <code>( flt&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f0</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave value 0.0 on stack. <code>(&#8201;&#8212;&#8201;flt )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f1</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave value 1.0 on stack. <code>(&#8201;&#8212;&#8201;flt )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f10</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave value 10.0 on stack. <code>(&#8201;&#8212;&#8201;flt )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f0.5</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave value 0.5 on stack. <code>(&#8201;&#8212;&#8201;flt )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>s&gt;f</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Convert single to float. <code>( n&#8201;&#8212;&#8201;flt )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>d&gt;f</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Convert double to float. <code>( d&#8201;&#8212;&#8201;flt )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f&gt;s</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Convert float to single. <code>( flt&#8201;&#8212;&#8201;n )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f&gt;d</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Convert float to double. <code>( flt&#8201;&#8212;&#8201;d )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f0=</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave !true! if <code>flt</code> equal to zero. <code>( flt&#8201;&#8212;&#8201;f )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f0&lt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave !true! if <code>flt</code> less than zero. <code>( flt&#8201;&#8212;&#8201;f )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f=</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave <code>true</code> if floats are equal. <code>( flt1 flt2&#8201;&#8212;&#8201;f )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f&lt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave <code>true</code> if <code>flt1</code> less than <code>flt2</code>. <code>( flt1 flt2&#8201;&#8212;&#8201;f )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f&#8656;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">eave <code>true</code> if <code>flt1</code> less than or equal to <code>flt2</code>.  <code>( flt1 flt2&#8201;&#8212;&#8201;f )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave <code>true</code> if <code>flt1</code> greater than <code>flt2</code>.  <code>( flt1 flt2&#8201;&#8212;&#8201;f )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f&gt;=</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave <code>true</code> if <code>flt1</code> greater than or equal to <code>flt2</code>.  <code>( flt1 flt2&#8201;&#8212;&#8201;f )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fnegate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Negate float value. <code>( flt&#8201;&#8212;&#8201;-flt )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fabs</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave absolute value. <code>( flt1&#8201;&#8212;&#8201;flt2 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fround</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Round to nearest integral value. <code>( flt1&#8201;&#8212;&#8201;flt2 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fmin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave minimum. <code>( flt1 flt2&#8201;&#8212;&#8201;flt )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fmax</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave maximum. <code>( flt1 flt2&#8201;&#8212;&#8201;flt )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f2*</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Multiple by 2. <code>( flt&#8201;&#8212;&#8201;flt*2)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f2/</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Divide by 2. <code>( flt&#8201;&#8212;&#8201;flt/2 )</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The following functions call out to the Microchip math library.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Word</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f+</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Addition <code>( flt1 flt2&#8201;&#8212;&#8201;flt1+flt2 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subtraction <code>( flt1 flt2&#8201;&#8212;&#8201;flt1-flt2 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f*</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Multiplication <code>( flt1 flt2&#8201;&#8212;&#8201;flt1*flt2 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f/</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Division <code>( flt1 flt2&#8201;&#8212;&#8201;flt1/flt2 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fpow</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Power. <code>( flt1 flt2&#8201;&#8212;&#8201;flt1**flt2)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fsin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sine of <code>flt</code> in radians. <code>( flt&#8201;&#8212;&#8201;sin(flt) )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fcos</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cosine of <code>flt</code> in radians. <code>( flt&#8201;&#8212;&#8201;cos(flt) )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ftan</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tangent of <code>flt</code> in radians. <code>( flt&#8201;&#8212;&#8201;tan(flt) )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fasin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Arcine of <code>flt</code>, radians. <code>( flt&#8201;&#8212;&#8201;asin(flt) )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>facos</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Arccosine of <code>flt</code>, radians. <code>( flt&#8201;&#8212;&#8201;acos(flt) )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fatan</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Arctangent of <code>flt</code>, radians. <code>( flt&#8201;&#8212;&#8201;atan(flt) )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fatan2</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Arctangent of <code>flt1/flt2</code>, radians. <code>( flt1 flt2&#8201;&#8212;&#8201;atan(flt1/flt2) )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fsqrt</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Square-root. <code>( flt&#8201;&#8212;&#8201;sqrt(flt) )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fexp</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exponential. <code>( flt&#8201;&#8212;&#8201;exp(flt) )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>flog</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Natural logarithm. <code>( flt&#8201;&#8212;&#8201;loge(flt) )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>flog10</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Logarithm, base 10. <code>( flt&#8201;&#8212;&#8201;log10(flt) )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fcosh</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hyperbolic cosine. <code>( flt&#8201;&#8212;&#8201;cosh(flt) )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fsinh</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hyperbolic sine. <code>( flt&#8201;&#8212;&#8201;sinh(flt) )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ftanh</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hyperbolic tangent. <code>( flt&#8201;&#8212;&#8201;tanh(flt) )</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_the_compiler">7. The Compiler</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_defining_functions">7.1. Defining functions</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>:</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Begin colon definition. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">End colon definition.  <code>(&#8201;&#8212;&#8201;)</code> <em>compile only</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>[</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enter interpreter state. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enter compilation state. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>state</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compilation state. <code>(&#8201;&#8212;&#8201;f )</code><br>
                      State can only be changed with ![! and !]!.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>[i</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enter Forth interrupt context. <code>(&#8201;&#8212;&#8201;)</code> PIC18, PIC24-30-33 <em>compile only</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>i]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enter compilation state. <code>(&#8201;&#8212;&#8201;)</code> PIC18, PIC24-30-33 <em>compile only</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>;i</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">End an interrupt word. <code>(&#8201;&#8212;&#8201;)</code> <em>compile only</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>literal</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compile value on stack at compile time. <code>( x&#8201;&#8212;&#8201;)</code><br>
                      At run time, leave value on stack. <code>(&#8201;&#8212;&#8201;x )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2literal</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compile double value on stack at compile time. <code>( x x&#8201;&#8212;&#8201;)</code><br>
                      At run time, leave value on stack. <code>(&#8201;&#8212;&#8201;x x )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>inline</code> <em>name</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inline the following word. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>inlined</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mark the last compiled word as inlined. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>immediate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mark latest definition as immediate. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>immed?</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave a nonzero value if addr contains an immediate flag. <code>( addr&#8201;&#8212;&#8201;f )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>in?</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave a nonzero flag if <code>nfa</code> has inline bit set.  <code>( nfa&#8201;&#8212;&#8201;f )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>postpone</code> <em>name</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Postpone action of immediate word. !(&#8201;&#8212;&#8201;)! <em>compile only</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>see</code> <em>name</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Show definition. Load <code>see.fs</code>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_comments">7.2. Comments</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Word</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(</code> <em>comment text</em> <code>)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inline comment.
                             Note that there needs to be a space after the opening parenthesis.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>\</code> <em>comment text</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Skip rest of line.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_examples_of_colon_definitions">7.3. Examples of colon definitions</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Code</th>
<th class="tableblock halign-left valign-top">Comments</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre>: square ( n -- n**2 )
  dup * ;</pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Example with stack comment and<br>
  &#8230;&#8203; body of definition.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre>: poke0  ( -- )
  [ $f8a 0 a, bsf, ] ;</pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Example of using PIC18 assembler.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_flow_control">8. Flow control</h2>
<div class="sectionbody">
<div class="paragraph">
<p>These control flow words can be used in a compile context only.</p>
</div>
<div class="sect2">
<h3 id="_structured_flow_control">8.1. Structured flow control</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comments</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>if</code> <em>xxx</em> <code>else</code> <em>yyy</em> <code>then</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditional execution. <code>( f&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>begin</code> <em>xxx</em> <code>again</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Infinite loop. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>begin</code> <em>xxx</em> <em>cond</em> <code>until</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Loop until <em>cond</em> is true. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>begin</code> <em>xxx</em> <em>cond</em> <code>while</code> <em>yyy</em> <code>repeat</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Loop while <em>cond</em> is true. <code>(&#8201;&#8212;&#8201;)</code><br>
                                                <em>yyy</em> is not executed on the last iteration.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>for</code> <em>xxx</em> <code>next</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Loop u times. <code>( u&#8201;&#8212;&#8201;)</code> <em>compile only</em><br>
                                                 <code>r@</code> gets the loop counter  u-1 &#8230;&#8203; 0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>endit</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets loop counter to zero so that we leave
                                                 a <code>for</code> loop when <code>next</code> is encountered. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>From <code>doloop.fs</code>, we get the ANSI loop constructs which iterate from <em>initial</em>
up to, but not including, <em>limit</em>:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>limit</em> <em>initial</em> <code>do</code> <em>words-to-repeat</em> <code>loop</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>limit</em> <em>initial</em> <code>do</code> <em>words-to-repeat</em> <em>value</em> <code>+loop</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>i</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave the current loop index. <code>(&#8201;&#8212;&#8201;n )</code><br>
                                                             Innermost loop, for nested loops.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>j</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave the next-outer loop index. <code>(&#8201;&#8212;&#8201;n )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>leave</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave the do loop immediately. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>?do</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Starts a do loop which is not run if
                                                             the arguments are equal. <code>( limit initial&#8201;&#8212;&#8201;)</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_loop_examples">8.2. Loop examples</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 40%;">
<col style="width: 60%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>decimal</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>: sumdo 0 100 0 do i + loop ;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sumdo</code> leaves 4950</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>: sumfor 0 100 for r@ + next ;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sumfor</code> leaves 4950</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>: print-twos 10 0 do i u. 2 +loop ;</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_case_example">8.3. Case example</h3>
<div class="paragraph">
<p>From <code>case.fs</code>, we get words <code>case</code>, <code>of</code>, <code>endof</code>, <code>default</code> and <code>endcase</code>
to define case constructs.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>: testcase
  4 for r@
    case
      0 of ." zero " endof
      1 of ." one " endof
      2 of ." two " endof
      default ." default " endof
    endcase
  next
;</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_unstructured_flow_control">8.4. Unstructured flow control</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>exit</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exit from a word. <code>(&#8201;&#8212;&#8201;)</code><br>
                       If exiting from within a for loop, we must drop the loop count with <code>rdrop</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>abort</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reset stack pointer and execute quit. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>?abort</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If flag is false, print message and abort. <code>( f addr u&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>?abort?</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If flag is false, output ? and abort. <code>( f&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>abort"</code> <em>xxx</em> <code>"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">if flag is false, type out last word executed, followed by text xxx. <code>( f&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>quit</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Interpret from keyboard. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>warm</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Make a warm start.
                       Reset reason will be displayed on restart.<br>
                       <code>S</code>: Reset instruction<br>
                       <code>E</code>: External reset pin<br>
                       <code>W</code>: Watchdog reset<br>
                       <code>U</code>: Return stack underflow<br>
                       <code>O</code>: Return stack overflow<br>
                       <code>B</code>: Brown out reset<br>
                       <code>P</code>: Power on reset<br>
                       <code>M</code>: Math error<br>
                       <code>A</code>: Address error<br>
                       Note that irq vector is cleared.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_vectored_execution_function_pointers">8.5. Vectored execution (Function pointers)</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>'</code> <em>name</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Search for <em>name</em> and leave its execution token (address). <code>(&#8201;&#8212;&#8201;addr )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>[']</code> <em>name</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Search for <em>name</em> and compile it&#8217;s execution token. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>execute</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Execute word at address. <code>( addr&#8201;&#8212;&#8201;)</code><br>
                       The actual stack effect will depend on the word executed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@ex</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fetch vector from addr and execute. <code>( addr&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>defer</code> <em>vec-name</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Define a deferred execution vector. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>is</code> <em>vec-name</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Store execution token in <em>vec-name</em>. <code>( addr&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>vec-name</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Execute the word whose execution token
                       is stored in the data space of <em>vec-name</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int!</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Store interrupt vector to table. <code>( xt vector-no&#8201;&#8212;&#8201;)</code><br>
                       PIC18: <code>vector-no</code> is dummy vector number (0) for high priority interrupts.<br>
                       PIC30: Alternate interrupt vector table in Flash.<br>
                       PIC33: Alternate interrupt vector table in RAM.<br>
                       PIC24H: Alternate interrupt vector table in RAM.<br>
                       PIC24F: Alternate interrupt vector table in RAM.<br>
                       PIC24FK: Alternate interrupt vector table in Flash.<br>
                       PIC24E: Main interrupt vector table in RAM.<br>
                       ATmega: Interrupt vector table in RAM.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int/</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Restore the original vector to the interrupt vector table in flash.
                       <code>( vector-no&#8201;&#8212;&#8201;)</code><br>
                       PIC30 PIC24FK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ivt</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Activate the normal interrupt vector table. <code>(&#8201;&#8212;&#8201;)</code><br>
                       Not PIC24E, dsPIC33E.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>aivt</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Activate the alternate interrupt vector table. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_autostart_example">8.6. Autostart example</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>' my-app is turnkey</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Autostart my-app.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false is turnkey</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Disable turnkey application.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_interrupt_example">8.7. Interrupt example</h3>
<div class="paragraph">
<p>This example is taken directly from the FlashForth source.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>ram variable icnt1
: irq_forth             \ The service function is a Forth colon definition
  [i                    \ in the Forth interrupt context.
    icnt1 @ 1+
    icnt1 !
  ]i
;i
' irq_forth 0 int!      \ Set the user interrupt vector.

: init                  \ Alternatively, compile a word
  ['] irq_forth 0 int!  \ so that we can install the
;                       \ interrupt service function
' init is turnkey       \ at every warm start.</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_p_register">9. The P register</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The P register can be used as a variable or as a pointer.
It can be used in conjunction with <code>for</code> &#8230;&#8203; <code>next</code>
or at any other time.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Word</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>!p</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Store address to P(ointer) register. <code>( addr&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@p</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fetch the P register to the stack. <code>(&#8201;&#8212;&#8201;addr )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>!p&gt;r</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Push contents of P to return stack and store new address to P.<br>
            <code>( addr&#8201;&#8212;&#8201;) ( R:&#8201;&#8212;&#8201;addr )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>r&gt;p</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pop from return stack to P register. <code>( R: addr&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>p+</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Increment P register by one. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>p2+</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add 2 to P register. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>p++</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add n to the p register. <code>( n&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>p!</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Store x to the location pointed to by the p register. <code>( x&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pc!</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Store c to the location pointed to by the p register. <code>( c&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>p@</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fetch the cell pointed to by the p register. <code>(&#8201;&#8212;&#8201;x )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pc@</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fetch the char pointed to by the p register. <code>(&#8201;&#8212;&#8201;c )</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>In a definition, <code>!p&gt;r</code> and <code>r&gt;p</code> should always be used
to allow proper nesting of words.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_characters">10. Characters</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>digit?</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Convert char to a digit according to base. <code>( c&#8201;&#8212;&#8201;n f )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>digit</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Convert n to ascii character value. <code>( n&#8201;&#8212;&#8201;c )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&gt;pr</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Convert a character to an ASCII value. <code>( c&#8201;&#8212;&#8201;c )</code><br>
                    Nongraphic characters converted to a dot.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>char</code> <em>char</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parse a character and leave ASCII value. <code>(&#8201;&#8212;&#8201;n )</code><br>
                    For example: <code>char A</code>  <code>(&#8201;&#8212;&#8201;65 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>[char]</code> <em>char</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compile inline ASCII character. <code>(&#8201;&#8212;&#8201;)</code> <em>compile only</em></p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="_strings">10.1. Strings</h3>
<div class="paragraph">
<p>Some of these words come from <code>core.fs</code>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>s"</code> <em>text</em> <code>"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compile string into flash. <code>(&#8201;&#8212;&#8201;)</code> <em>compile_only</em><br>
                                  At run time, leaves address and length. <code>(&#8201;&#8212;&#8201;addr u )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>."</code> <em>text</em> <code>"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compile string to print into flash. <code>(&#8201;&#8212;&#8201;)</code> <em>compile_only</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>place</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Place string from a1 to a2 as a counted string. !( addr1 u addr2&#8201;&#8212;&#8201;)!</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>n=</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compare strings in RAM(<code>addr</code>) and Flash(<code>nfa</code>).  <code>( addr nfa u&#8201;&#8212;&#8201;f )</code><br>
                    Leave true if strings match, <code>n &lt; 16</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scan</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scan string until <code>c</code> is found. <code>( c-addr u c&#8201;&#8212;&#8201;caddr1 u1 )</code><br>
                    <code>c-addr</code> must point to RAM and <code>u &lt; 255</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>skip</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Skip chars until <code>c</code> not found.  <code>( c-addr u c&#8201;&#8212;&#8201;caddr1 u1 )</code><br>
                    <code>c-addr</code> must point to RAM and <code>u &lt; 255</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/string</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Trim string. <code>( addr u n&#8201;&#8212;&#8201;addr+n u-n )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&gt;number</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Convert string to a number. <code>( 0 0 addr1 u1&#8201;&#8212;&#8201;ud.l ud.h addr2 u2 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>number?</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Convert string to a number and flag. <code>( addr1&#8201;&#8212;&#8201;addr2 0 | n 1 | d.l d.h 2 )</code><br>
                    Prefix: <code>#</code> decimal, <code>$</code> hexadecimal, <code>%</code> binary.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sign?</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get optional minus sign. <code>( addr1 n1&#8201;&#8212;&#8201;addr2 n2 flag )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type line to terminal, <code>u &lt; #256</code>. <code>( addr u&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>accept</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get line from the terminal. <code>( c-addr +n1&#8201;&#8212;&#8201;+n2 )</code><br>
                    At most n1 characters are accepted, until the line is terminated with a carriage return.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>source</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave address of input buffer and number of characters.  <code>(&#8201;&#8212;&#8201;c-addr u )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>evaluate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Interpret a string in SRAM. <code>( addr n&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>interpret</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Interpret the buffer. <code>( c-addr u&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>parse</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parse a word in TIB. <code>( c&#8201;&#8212;&#8201;addr length )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>word</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parse a word in TIB and write length into TIB.
                    Leave the address of length byte on the stack. <code>( c&#8201;&#8212;&#8201;c-addr )</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_pictured_numeric_output">10.2. Pictured numeric output</h3>
<div class="paragraph">
<p>Formatted string representing an unigned double-precision integer
is constructed in the end of <code>tib</code>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Word</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;#</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Begin conversion to formatted string. <code>(&#8201;&#8212;&#8201;)</code> <em>compile only</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>#</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Convert 1 digit to formatted string. <code>( ud1&#8201;&#8212;&#8201;ud2 )</code> <em>compile only</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>#s</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Convert remaining digits. <code>( ud1&#8201;&#8212;&#8201;ud2 )</code> <em>compile only</em>
           Note that <code>ud2</code> will be zero.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hold</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Append char to formatted string. <code>( c&#8201;&#8212;&#8201;)</code> <em>compile only</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sign</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add minus sign to formatted string, if <code>n&lt;0</code>. <code>( n&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>#&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">End conversion, leave address and count
           of formatted string. <code>( ud1&#8201;&#8212;&#8201;c-addr u )</code> <em>compile only</em></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>For example, the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>-1 34. &lt;# # # #s rot sign #&gt; type</pre>
</div>
</div>
<div class="paragraph">
<p>results in <code>-034 ok</code></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_interaction_with_the_operator">11. Interaction with the operator</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Interaction with the user is via a serial communications port, typically UART1.
Settings are 38400 baud, 8N1, using Xon/Xoff handshaking.
Which particular serial port is selected is determined by the
vectors <code>'emit</code>, <code>'key</code> and <code>'key?</code>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Word</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>emit</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Emit c to the serial port FIFO. <code>( c&#8201;&#8212;&#8201;)</code><br>
             FIFO is 46 chars. Executes pause.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>space</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Emit one space character. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>spaces</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Emit n space characters. <code>( n&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cr</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Emit carriage-return, line-feed. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>key</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get a character from the serial port FIFO. <code>(&#8201;&#8212;&#8201;c )</code><br>
             Executes pause until a character is available.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>key?</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave true if character is waiting in the serial port FIFO. <code>(&#8201;&#8212;&#8201;f )</code></p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="_serial_communication_ports">11.1. Serial communication ports</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Word</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tx0</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Send a character via UART0 on ATmega. <code>( c&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rx0</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Receive a character from UART0 on ATmega. <code>(&#8201;&#8212;&#8201;c )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rx0?</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave !true! if the UART0 receive buffer is not empty. <code>(&#8201;&#8212;&#8201;f )</code> ATmega</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>u0-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Disable flow control for UART1 interface. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>u0+</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable flow control for UART1 interface, default. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tx1</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Send character to UART1. <code>( c&#8201;&#8212;&#8201;)</code><br>
           Buffered via an interrupt driven queue.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rx1</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Receive a character from UART1. <code>(&#8201;&#8212;&#8201;c )</code><br>
           Buffered by an interrupt-driven queue.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rx1?</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave <code>true</code> if the UART1 receive buffer is not empty. <code>(&#8201;&#8212;&#8201;f )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>u1-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Disable flow control for UART1 interface. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>u1+</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable flow control for UART1 interface, default. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tx2</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Send character to UART2. <code>( c&#8201;&#8212;&#8201;)</code> PIC24-30-33</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rx2</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Receive a character from UART2. <code>(&#8201;&#8212;&#8201;c )</code> PIC24-30-33</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rx2?</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave !true! if the UART1 receive buffer is not empty. <code>(&#8201;&#8212;&#8201;f )</code> PIC24-30-33</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>u2-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Disable flow control for UART2 interface. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>u2+</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable flow control for UART2 interface, default. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>txu</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Send a character via the USB UART. <code>( c&#8201;&#8212;&#8201;)</code>  PIC18-USB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rxu</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Receive a character from the USB UART. <code>(&#8201;&#8212;&#8201;c )</code>  PIC18-USB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rxu?</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave <code>true</code> if the USB UART receive buffer is not empty. PIC18-USB <code>(&#8201;&#8212;&#8201;f )</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_character_queues_on_pic24_30_33">11.2. Character queues on PIC24-30-33</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cq:</code> <em>name</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create character queue. <code>( u&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cq0</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initialize or reset queue. <code>( queue-addr&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&gt;cq?</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Is there space available in queue. <code>( queue-addr&#8201;&#8212;&#8201;f )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&gt;cq</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Put character into queue. <code>( c queue-addr&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cq&gt;?</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of characters in queue. <code>( queue-addr&#8201;&#8212;&#8201;u )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cq&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get character from queue. <code>( queue-addr&#8201;&#8212;&#8201;c )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>u1rxq</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave UART1 RX queue address. <code>(&#8201;&#8212;&#8201;queue-addr )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>u1txq</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave UART1 TX queue address. <code>(&#8201;&#8212;&#8201;queue-addr )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>u2rxq</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave UART2 RX queue address. <code>(&#8201;&#8212;&#8201;queue-addr )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>u2txq</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave UART2 TX queue address. <code>(&#8201;&#8212;&#8201;queue-addr )</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_other_hardware">11.3. Other Hardware</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Word</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cwd</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clear the WatchDog counter. <code>(&#8201;&#8212;&#8201;)</code>  PIC18, PIC24-30-33</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ei</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable interrupts. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>di</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Disable interrupts. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ms</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pause for <code>+n</code> milliseconds. <code>( +n&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ticks</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">System ticks, 0&#8212;&#8203;ffff milliseconds. <code>(&#8201;&#8212;&#8201;u )</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_multitasking">12. Multitasking</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Load the words for multitasking from <code>task.fs</code>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Word</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>task:</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Define a new task in flash memory space. <code>( tibsize stacksize rstacksize addsize&#8201;&#8212;&#8201;)</code><br>
               Use <code>ram xxx allot</code> to leave space for the PAD
               of the prevously defined task.
               The OPERATOR task does not use PAD.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tinit</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initialise a user area and link it
               to the task loop. <code>( taskloop-addr task-addr&#8201;&#8212;&#8201;)</code><br>
               Note that this may only be executed from
               the operator task.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>task</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave the address of the task definition table. <code>(&#8201;&#8212;&#8201;addr )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>run</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Makes a task run by inserting it after operator
               in the round-robin linked list. <code>( task-addr&#8201;&#8212;&#8201;)</code><br>
               May only be executed from the operator task.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>end</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Remove a task from the task list. <code>( task-addr&#8201;&#8212;&#8201;)</code><br>
               May only be executed from the operator task.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>single</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">End all tasks except the operator task. <code>(&#8201;&#8212;&#8201;)</code><br>
               Removes all tasks from the task list.
               May only be executed from the operator task.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tasks</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List all running tasks. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pause</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Switch to the next task in the round robin task list. <code>(&#8201;&#8212;&#8201;)</code><br>
               Idle in the operator task if allowed by all tasks.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>his</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Access user variables of other task. <code>( task.addr vvar.addr&#8201;&#8212;&#8201;addr )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>load</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave the CPU load on the stack. <code>(&#8201;&#8212;&#8201;n )</code><br>
               Load is percentage of time that the CPU is busy.
               Updated every 256 milliseconds.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>load+</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable the load LED on AVR8. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>load-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Disable the load LED on AVR8. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>busy</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CPU idle mode not allowed. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>idle</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CPU idle is allowed. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>operator</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave the address of the operator task. <code>(&#8201;&#8212;&#8201;addr )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ulink</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to next task. <code>(&#8201;&#8212;&#8201;addr )</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_structured_assembler">13. Structured Assembler</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To use many of the words listed in the following sections, load the text file <code>asm.fs</code>.
The assembler for each processor family provides the same set of structured flow control words,
however, the conditionals that go with these words are somewhat processor-specific.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>if,</code> <em>xxx</em> <code>else,</code> <em>yyy</em> <code>then,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditional execution. <code>( cc&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>begin,</code> <em>xxx</em> <code>again,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Loop indefinitely. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>begin,</code> <em>xxx</em> <em>cc</em> <code>until,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Loop until condion is true. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_assembler_words_for_pic18">14. Assembler words for PIC18</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In the stack-effect notaion for the PIC18 family,
<code>f</code> is a file register address,
<code>d</code> is the result destination,
<code>a</code> is the access bank modifier,
and <code>k</code> is a literal value.</p>
</div>
<div class="sect2">
<h3 id="_conditions_for_structured_flow_control">14.1. Conditions for structured flow control</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Word</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cc,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">test carry <code>(&#8201;&#8212;&#8201;cc )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>nc,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">test not carry <code>(&#8201;&#8212;&#8201;cc )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mi,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">test negative <code>(&#8201;&#8212;&#8201;cc )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pl,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">test not negative <code>(&#8201;&#8212;&#8201;cc )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>z,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">test zero <code>(&#8201;&#8212;&#8201;cc )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>nz,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">test not zero <code>(&#8201;&#8212;&#8201;cc )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ov,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">test overflow <code>(&#8201;&#8212;&#8201;cc )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>nov,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">test not overflow <code>(&#8201;&#8212;&#8201;cc )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>not,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">invert condition <code>( cc&#8201;&#8212;&#8201;not-cc )</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_destination_and_access_modifiers">14.2. Destination and access modifiers</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Word</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>w,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Destination WREG <code>(&#8201;&#8212;&#8201;0 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Destination file <code>(&#8201;&#8212;&#8201;1 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>a,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Access bank <code>(&#8201;&#8212;&#8201;0 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>b,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use bank-select register <code>(&#8201;&#8212;&#8201;1 )</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_byte_oriented_file_register_operations">14.3. Byte-oriented file register operations</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Word</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>addwf,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add WREG and f. <code>( f d a&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>addwfc,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add WREG and carry bit to f. <code>( f d a&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>andwf,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AND WREG with f. <code>( f d a&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>clrf,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clear f. <code>( f a&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>comf,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Complement f. <code>( f d a&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cpfseq,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compare f with WREG, skip if equal. <code>( f a&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cpfsgt,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compare f with WREG, skip if greater than. <code>( f a&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cpfslt,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compare f with WREG, skip if less than. <code>( f a&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>decf,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Decrement f. <code>( f d a&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>decfsz,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Decrement f, skip if zero. <code>( f d a&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dcfsnz,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Decrement f, skip if not zero. <code>( f d a&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>incf,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Increment f. <code>( f d a&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>incfsz,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Increment f, skip if zero. <code>( f d a&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>infsnz,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Increment f, skip if not zero. <code>( f d a&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>iorwf,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inclusive OR WREG with f. <code>( f d a&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>movf,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Move f. <code>( f d a&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>movff,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Move fs to fd. <code>( fs fd&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>movwf,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Move WREG to f. <code>( f a&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mulwf,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Multiply WREG with f. <code>( f a&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>negf,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Negate f. <code>( f a&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rlcf,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rotate left f, through carry. <code>( f d a&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rlncf,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rotate left f, no carry. <code>( f d a&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rrcf,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rotate right f, through carry. <code>( f d a&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rrncf,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rotate right f, no carry. <code>( f d a&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>setf,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set f. <code>( f d a&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>subfwb,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subtract f from WREG, with borrow. <code>( f d a&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>subwf,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subtract WREG from f. <code>( f d a&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>subwfb,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subtract WREG from f, with borrow. <code>( f d a&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>swapf,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Swap nibbles in f. <code>( f d a&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tstfsz,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Test f, skip if zero. <code>( f a&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>xorwf,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exclusive OR WREG with f. <code>( f d a&#8201;&#8212;&#8201;)</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_bit_oriented_file_register_operations">14.4. Bit-oriented file register operations</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Word</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bcf,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bit clear f. <code>( f b a&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bsf,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bit set f. <code>( f b a&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>btfsc,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bit test f, skip if clear. <code>( f b a&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>btfss,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bit test f, skip if set. <code>( f b a&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>btg,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bit toggle f. <code>( f b a&#8201;&#8212;&#8201;)</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_literal_operations">14.5. Literal operations</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Word</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>addlw,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add literal and WREG. <code>( k&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>andlw,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AND literal with WREG. <code>( k&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>daw,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Decimal adjust packed BCD digits in WREG. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>iorlw,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inclusive OR literal with WREG. <code>( k&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lfsr,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Move literal to FSRx. <code>( k f&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>movlb,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Move literal to BSR. <code>( k&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>movlw,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Move literal to WREG. <code>( k&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mullw,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Multiply literal with WREG. <code>( k&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sublw,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subtract WREG from literal. <code>( k&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>xorlw,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exclusive OR literal with WREG. <code>( k&#8201;&#8212;&#8201;)</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_data_memoryprogram_memory_operations">14.6. Data memory&#8201;&#8212;&#8201;program memory operations</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Word</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tblrd*,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Table read. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tblrd*+,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Table read with post-increment. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tblrd*-,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Table read with post-decrement. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tblrd+*,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Table read with pre-increment. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tblwt*,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Table write. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tblwt*+,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Table write with post-increment. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tblwt*-,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Table write with post-decrement. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tblwt+*,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Table write with pre-increment. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_low_level_flow_control_operations">14.7. Low-level flow control operations</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Word</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bra,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Branch unconditionally. <code>( rel-addr&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>call,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Call subroutine. <code>( addr&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>goto,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Go to address. <code>( addr&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pop,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pop (discard) top of return stack. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>push,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Push address of next instruction to top of return stack. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rcall,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Relative call. <code>( rel-addr&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>retfie,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return from interrupt enable. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>retlw,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return with literal in WREG. <code>( k&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>return,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return from subroutine. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_other_mcu_control_operations">14.8. Other MCU control operations</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Word</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>clrwdt,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clear watchdog timer. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>nop,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No operation. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>reset,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Software device reset. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sleep,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Go into standby mode. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_assembler_words_for_pic24_30_33">15. Assembler words for PIC24-30-33</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As stated in the <code>wordsAll.txt</code>,
there is only a partial set of words for these families of microcontrollers.</p>
</div>
<div class="sect2">
<h3 id="_conditions_for_structured_flow_control_2">15.1. Conditions for structured flow control</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Word</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>z,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">test zero <code>(&#8201;&#8212;&#8201;cc )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>nz,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">test not zero <code>(&#8201;&#8212;&#8201;cc )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>not,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">invert condition <code>( cc&#8201;&#8212;&#8201;not-cc )</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_low_level_flow_control_operations_2">15.2. Low-level flow control operations</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Word</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bra,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Branch unconditionally. <code>( rel-addr&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rcall,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Call subroutine. <code>( rel-addr&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>return,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return from subroutine. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>retfie,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return from interrupt enable. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_bit_oriented_operations">15.3. Bit-oriented operations</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Word</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bclr,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bit clear. <code>( bit ram-addr&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bset,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bit set. <code>( bit ram-addr&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>btst,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bit test to z. <code>( bit ram-addr&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>btsc,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bit test, skip if clear. <code>( bit ram-addr&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>btss,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bit test, skip if set. <code>( bit ram-addr&#8201;&#8212;&#8201;)</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_assembler_words_for_avr8">16. Assembler words for AVR8</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For the ATmega instructions,
<code>Rd</code> denotes the destination (and source) register,
<code>Rr</code> denotes the source register,
<code>Rw</code> denotes a register-pair code,
<code>K</code> denotes constant data,
<code>k</code> is a constant address, <code>b</code> is a bit in the register,
<code>x,Y,Z</code> are indirect address registers, <code>A</code> is an I/O location address,
and <code>q</code> is a displacement (6-bit) for direct addressing.</p>
</div>
<div class="sect2">
<h3 id="_conditions_for_structured_flow_control_3">16.1. Conditions for structured flow control</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Word</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cs,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">carry set <code>(&#8201;&#8212;&#8201;cc )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>eq,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">zero <code>(&#8201;&#8212;&#8201;cc )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hs,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">half carry set <code>(&#8201;&#8212;&#8201;cc )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ie,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">interrupt enabled <code>(&#8201;&#8212;&#8201;cc )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lo,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">lower <code>(&#8201;&#8212;&#8201;cc )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lt,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">less than <code>(&#8201;&#8212;&#8201;cc )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mi,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">negative <code>(&#8201;&#8212;&#8201;cc )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ts,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T flag set <code>(&#8201;&#8212;&#8201;cc )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vs,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no overflow <code>(&#8201;&#8212;&#8201;cc )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>not,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">invert condition <code>( cc&#8201;&#8212;&#8201;not-cc )</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_register_constants">16.2. Register constants</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Word</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Z</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(&#8201;&#8212;&#8201;0 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Z+</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(&#8201;&#8212;&#8201;1 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-Z</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(&#8201;&#8212;&#8201;2 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Y</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(&#8201;&#8212;&#8201;8 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Y+</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(&#8201;&#8212;&#8201;9 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-Y</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(&#8201;&#8212;&#8201;10 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>X</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(&#8201;&#8212;&#8201;12 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>X+</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(&#8201;&#8212;&#8201;13 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-X</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(&#8201;&#8212;&#8201;14 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>XH:XL</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(&#8201;&#8212;&#8201;01 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>YH:YL</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(&#8201;&#8212;&#8201;02 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ZH:ZL</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(&#8201;&#8212;&#8201;03 )</code></p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 16.6666%;">
<col style="width: 33.3335%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Word</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Word</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>R0</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(&#8201;&#8212;&#8201;0 )</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>R16</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(&#8201;&#8212;&#8201;16 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>R1</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(&#8201;&#8212;&#8201;1 )</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>R17</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(&#8201;&#8212;&#8201;17 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>R2</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(&#8201;&#8212;&#8201;2 )</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>R18</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(&#8201;&#8212;&#8201;18 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>R3</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(&#8201;&#8212;&#8201;3 )</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>R19</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(&#8201;&#8212;&#8201;19 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>R4</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(&#8201;&#8212;&#8201;4 )</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>R20</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(&#8201;&#8212;&#8201;20 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>R5</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(&#8201;&#8212;&#8201;5 )</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>R21</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(&#8201;&#8212;&#8201;21 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>R6</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(&#8201;&#8212;&#8201;6 )</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>R22</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(&#8201;&#8212;&#8201;22 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>R7</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(&#8201;&#8212;&#8201;7 )</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>R23</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(&#8201;&#8212;&#8201;23 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>R8</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(&#8201;&#8212;&#8201;8 )</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>R24</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(&#8201;&#8212;&#8201;24 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>R9</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(&#8201;&#8212;&#8201;9 )</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>R25</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(&#8201;&#8212;&#8201;25 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>R10</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(&#8201;&#8212;&#8201;10 )</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>R26</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(&#8201;&#8212;&#8201;26 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>R11</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(&#8201;&#8212;&#8201;11 )</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>R27</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(&#8201;&#8212;&#8201;27 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>R12</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(&#8201;&#8212;&#8201;12 )</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>R28</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(&#8201;&#8212;&#8201;28 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>R13</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(&#8201;&#8212;&#8201;13 )</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>R29</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(&#8201;&#8212;&#8201;29 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>R14</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(&#8201;&#8212;&#8201;14 )</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>R30</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(&#8201;&#8212;&#8201;30 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>R15</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(&#8201;&#8212;&#8201;15 )</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>R31</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(&#8201;&#8212;&#8201;31 )</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_arithmetic_and_logic_instructions">16.3. Arithmetic and logic instructions</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Word</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>add,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add without carry. <code>( Rd Rr&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>adc,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add with carry. <code>( Rd Rr&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>adiw,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add immediate to word. <code>( Rw K&#8201;&#8212;&#8201;)</code>  <code>Rw = {XH:XL,YH:YL,ZH:ZL}</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sub,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subtract without carry. <code>( Rd Rr&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>subi,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subtract immediate. <code>( Rd K&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sbc,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subtract with carry. <code>( Rd Rr&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sbci,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subtract immediate with carry. <code>( Rd K&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sbiw,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subtract immediate from word. <code>( Rw K&#8201;&#8212;&#8201;)</code> <code>Rw = {XH:XL,YH:YL,ZH:ZL}</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>and,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Logical AND. <code>( Rd Rr&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>andi,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Logical AND with immediate. <code>( Rd K&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>or,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Logical OR. <code>( Rd Rr&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ori,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Logical OR with immediate. <code>( Rd K&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>eor,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exclusive OR. <code>( Rd Rr&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>com,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One&#8217;s complement. <code>( Rd&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>neg,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Two&#8217;s complement. <code>( Rd&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sbr,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set bit(s) in register. <code>( Rd K&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cbr,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clear bit(s) in register. <code>( Rd K&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>inc,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Increment. <code>( Rd&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dec,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Decrement. <code>( Rd&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tst,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Test for zero or minus. <code>( Rd&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>clr,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clear register. <code>( Rd&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ser,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set register. <code>( Rd&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mul,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Multiply unsigned. <code>( Rd Rr&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>muls,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Multiply signed. <code>( Rd Rr&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mulsu</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Multiply signed with unsigned. <code>( Rd Rr&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fmul,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fractional multiply unsigned. <code>( Rd Rr&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fmuls,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fractional multiply signed. <code>( Rd Rr&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fmulsu,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fractional multiply signed with unsigned. <code>( Rd Rr&#8201;&#8212;&#8201;)</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_branch_instructions">16.4. Branch instructions</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Word</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rjmp,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Relative jump. <code>( k&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ijmp,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indirect jump to (Z). <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>eijmp,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Extended indirect jump to (Z). <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jmp,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jump. <code>( k16 k6&#8201;&#8212;&#8201;)</code>  <code>k6</code> is zero for a 16-bit address.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rcall,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Relative call subroutine. <code>( k&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>icall,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indirect call to (Z). <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>eicall,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Extended indirect call to (Z). <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>call,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Call subroutine. <code>( k16 k6&#8201;&#8212;&#8201;)</code>  <code>k6</code> is zero for a 16-bit address.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ret,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subroutine return. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>reti,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Interrupt return. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cpse,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compare, skip if equal. <code>( Rd Rr&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cp,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compare. <code>( Rd Rr&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cpc,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compare with carry. <code>( Rd Rr&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cpi,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compare with immediate. <code>( Rd K&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sbrc,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Skip if bit in register cleared. <code>( Rr b&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sbrs,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Skip if bit in register set. <code>( Rr b&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sbic,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Skip if bit in I/O register cleared. <code>( A b&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sbis,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Skip if bit in I/O register set. <code>( A b&#8201;&#8212;&#8201;)</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_data_transfer_instructions">16.5. Data transfer instructions</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Word</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mov,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Copy register. <code>( Rd Rr&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>movw,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Copy register pair. <code>( Rd Rr&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ldi,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Load immediate. <code>( Rd K&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lds,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Load direct from data space. <code>( Rd K&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ld,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Load indirect. <code>( Rd Rr&#8201;&#8212;&#8201;)</code> <code>Rr = {X,X+,-X,Y,Y+,-Y,Z,Z+,-Z}</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ldd,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Load indirect with displacement. <code>( Rd Rr q&#8201;&#8212;&#8201;)</code> <code>Rr = {Y,Z}</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sts,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Store direct to data space. <code>( k Rr&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>st,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Store indirect. <code>( Rr Rd&#8201;&#8212;&#8201;)</code> <code>Rd = {X,X+,-X,Y,Y+,-Y,Z,Z+,-Z}</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>std,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Store indirect with displacement. <code>( Rr Rd q&#8201;&#8212;&#8201;)</code> <code>Rd={Y,Z}</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>in,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In from I/O location. <code>( Rd A&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>out,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Out to I/O location. <code>( Rr A&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>push,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Push register on stack. <code>( Rr&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pop,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pop register from stack. <code>( Rd&#8201;&#8212;&#8201;)</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_bit_and_bit_test_instructions">16.6. Bit and bit-test instructions</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Word</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lsl,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Logical shift left. <code>( Rd&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lsr,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Logical shift right. <code>( Rd&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rol,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rotate left through carry. <code>( Rd&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ror,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rotate right through carry. <code>( Rd&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>asr,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Arithmetic shift right. <code>( Rd&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>swap,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Swap nibbles. <code>( Rd&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bset,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Flag set. <code>( s&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bclr,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Flag clear. <code>( s&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sbi,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set bit in I/O register. <code>( A b&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cbi,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clear bit in I/O register. <code>( A b&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bst,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bit store from register to T. <code>( Rr b&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bld,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bit load from T to register. <code>( Rd b&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sec,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set carry. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>clc,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clear carry. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sen,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set negative flag. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cln,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clear negative flag. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sez,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set zero flag. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>clz</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clear zero flag. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sei,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Global interrupt enable. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cli,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Global interrupt disable. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ses,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set signed test flag. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cls,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clear signed test flag. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sev,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set two&#8217;s complement overflow. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>clv,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clear two-s complement overflow. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>set,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set T in SREG. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>clt,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clear T in SREG. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>seh,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set half carry flag in SREG. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>clh,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clear half carry flag in SREG. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_mcu_control_instructions">16.7. MCU control instructions</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Word</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>break,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Break. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>nop,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No operation. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sleep,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sleep. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>wdr,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Watchdog reset. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_synchronous_serial_communication">17. Synchronous serial communication</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_i2c_communications_as_master">17.1. I<sup>2</sup>C communications as master</h3>
<div class="paragraph">
<p>The following words are available as a common set of words for PIC18FXXK22,
PIC24FV32KX30X and ATmega328P microcontrollers.
Load them from a file with a name like <code>i2c-base-XXXX.fs</code> where <code>XXXX</code>
is the specific microcontroller.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Word</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>i2c.init</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initializes I<sup>2</sup>C master mode, 100 kHz clock. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>i2c.close</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Shut down the peripheral module. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>i2c.ping?</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leaves <code>true</code> if the addressed slave device acknowledges. <code>( 7-bit-addr&#8201;&#8212;&#8201;f )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>i2c.addr.write</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Address slave device for writing. <code>( 7-bit-addr&#8201;&#8212;&#8201;f )</code><br>
                     Leave !true! if the slave acknowledged.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>i2c.c!</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Send byte and leave <code>ack</code> bit. <code>( c&#8201;&#8212;&#8201;ack )</code><br>
                     Note that the <code>ack</code> bit will be high if the slave device did <em>not</em> acknowledge.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>i2c-addr-read</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Address slave device for reading.  <code>( 7-bit-addr&#8201;&#8212;&#8201;f )</code><br>
                     Leave <code>true</code> if slave acknowledged.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>i2c.c@.ack</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fetch a byte and <code>ack</code> for another. <code>(&#8201;&#8212;&#8201;c )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>i2c.c@.nack</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fetch one last byte. <code>(&#8201;&#8212;&#8201;c )</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Low level words.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Word</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>i2c.idle?</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leave <code>true</code> if the I<sup>2</sup>C bus is idle. <code>(&#8201;&#8212;&#8201;f )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>i2c.start</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Send start condition. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>i2c.rsen</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Send restart condition. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>i2c.stop</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Send stop condition. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>i2c.wait</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Poll the I<sup>2</sup>C hardware until the operation has finished. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>i2c.bus.reset</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clock through bits so that slave devices are sure to release the bus. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_alternate_set_i2c_words_for_pic18">17.2. Alternate set I<sup>2</sup>C words for PIC18</h3>
<div class="paragraph">
<p>Load these words from <code>i2c_base.fs</code> for a PIC18 microcontroller.
They make use of the structured assembler for the PIC18.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Word</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>i2cinit</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initializes I<sup>2</sup>C master mode, 100 kHz clock. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>i2cws</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Wake slave. Bit 0 is R/W bit. <code>( slave-addr&#8201;&#8212;&#8201;)</code><br>
                The 7-bit I<sup>2</sup>C address is in bits 7-1.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>i2c!</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Write one byte to I<sup>2</sup>C bus and wait for <code>ACK</code>. <code>( c&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>i2c@ak</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Read one byte and continue. <code>(&#8201;&#8212;&#8201;c )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>i2c@nak</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Read one last byte from the I<sup>2</sup>C bus. <code>(&#8201;&#8212;&#8201;c )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>i2c-addr1</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Write 8-bit address to slave. <code>( addr slave-addr&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>i2c-addr2</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Write 16-bit address to slave <code>( addr slave-addr&#8201;&#8212;&#8201;)</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Lower-level words.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Word</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ssen</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Assert start condition. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>srsen</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Assert repeated start condition. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>spen</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Generate a stop condition. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>srcen</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set receive enable. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>snoack</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Send not-acknowledge. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sack</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Send acknowledge bit. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sspbuf!</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Write byte to <code>SSPBUF</code> and wait for transmission. <code>( c&#8201;&#8212;&#8201;)</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_spi_communications_as_master">17.3. SPI communications as master</h3>
<div class="paragraph">
<p>The following words are available as a common set of words for PIC18FXXK22,
PIC24FV32KX30X and ATmega328P microcontrollers.
Load them from a file with a name like <code>spiN-base-XXXX.fs</code> where <code>XXXX</code>
is the specific microcontroller and <code>N</code> identifies the particular SPI module.
Because SPI devices are so varied in their specification, you likely have to
adjust the register settings in <code>spi.init</code> to suit your particular device.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Word</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>spi.init</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initializes SPI master mode, 1 MHz clock. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>spi.close</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Shut down the peripheral module. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>spi.wait</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Poll the SPI peripheral until the operation has finished. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>spi.cexch</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Send byte <code>c1</code>, leave incoming byte <code>c2</code> on stack. <code>( c1&#8201;&#8212;&#8201;c2 )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>spi.csend</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Send byte <code>c</code>. <code>( c&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>spi.select</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Select the external device. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>spi.deselect</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Deselect the external device. <code>(&#8201;&#8212;&#8201;)</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_bibliography">Bibliography</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This guide assembled by Peter Jacobs, School of Mechanical Engineering,
The University of Queensland, February-2016 as Report 2016/02.
Update 2018-04-09, Ported to ASCIIDOC 2022-01-02.</p>
</div>
<div class="paragraph">
<p>It is a remix of material from the following sources:<br></p>
</div>
<div class="ulist bibliography">
<ul class="bibliography">
<li>
<p>FlashForth v5.0 source code and word list by Mikael Nordman
<a href="http://flashforth.com/" class="bare">http://flashforth.com/</a></p>
</li>
<li>
<p>EK Conklin and ED Rather <em>Forth Programmer&#8217;s Handbook</em> 3rd Ed. 2007 FORTH, Inc.</p>
</li>
<li>
<p>L Brodie <em>Starting Forth</em> 2nd Ed., 1987 Prentice-Hall Software Series.</p>
</li>
<li>
<p>Robert B. Reese <em>Microprocessors from Assembly Language to C Using the PIC18Fxx2</em>
Da Vinci Engineering Press, 2005.</p>
</li>
<li>
<p>Microchip <em>16-bit MCU and DSC Programmer’s Reference Manual</em> Document DS70157F, 2011.</p>
</li>
<li>
<p>Atmel <em>8-bit AVR Insturction Set</em> Document 08561-AVR-07/10.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2022-01-03 11:22:03 +1000
</div>
</div>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "AMS" } }
})
MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {
    if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains('stemblock')) {
      data.math.root.display = "block"
    }
    return data
  })
})
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
</body>
</html>